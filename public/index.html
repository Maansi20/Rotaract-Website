<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rotaract Club - Community Service & Leadership</title>
    <meta name="description" content="Join our vibrant Rotaract Club community dedicated to service, leadership, and making a positive impact in our community.">
    
    <!-- External CSS Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* CSS Variables */
        :root {
            --rotaract-blue: #1f4788;
            --rotaract-gold: #f7931e;
            --rotaract-red: #dc143c;
            --gradient-primary: linear-gradient(135deg, var(--rotaract-blue) 0%, var(--rotaract-gold) 100%);
            --gradient-secondary: linear-gradient(135deg, var(--rotaract-red) 0%, var(--rotaract-gold) 100%);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
            overflow-x: hidden;
            padding-top: 90px; /* Increased for larger navbar */
        }

        /* Animations */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Animation Classes */
        .animate-fadeInUp { animation: fadeInUp 0.8s ease-out forwards; }
        .animate-slideInLeft { animation: slideInLeft 0.8s ease-out forwards; }
        .animate-slideInRight { animation: slideInRight 0.8s ease-out forwards; }
        .animate-float { animation: float 3s ease-in-out infinite; }
        .animate-delay-1 { animation-delay: 0.1s; }
        .animate-delay-2 { animation-delay: 0.2s; }
        .animate-delay-3 { animation-delay: 0.3s; }
        .animate-delay-4 { animation-delay: 0.4s; }

        /* Navigation Styles */
        .navbar-custom {
            background: var(--rotaract-blue) !important;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.15);
            padding: 1.2rem 0;
            min-height: 80px;
        }

        .navbar-custom.scrolled {
            background: var(--rotaract-blue) !important;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.25);
            padding: 0.8rem 0;
            min-height: 70px;
        }

        .navbar .container-fluid {
            padding-left: 0;
        }

        .navbar-brand {
            font-size: 1.8rem;
            font-weight: 700;
            color: white !important;
            text-decoration: none;
            transition: all 0.3s ease;
            
        }

        .navbar-brand:hover {
            color: var(--rotaract-gold) !important;
            transform: scale(1.05);
        }

        .navbar-brand img {
            transition: transform 0.3s ease;
            border-radius: 50%;
            border: 3px solid var(--rotaract-gold);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .navbar-brand:hover img {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(247, 147, 30, 0.4);
        }

        /* Enhanced Navigation Links for Large Screens */
        .navbar-nav {
            display: flex !important;
            flex-direction: row !important;
            align-items: center !important;
            justify-content: flex-start !important;
            gap: 0.5rem !important;
            width: 100% !important;
            margin-left: 0.5rem !important;
        }

        .navbar-nav .nav-item {
            display: inline-block !important;
            margin: 0 !important;
            flex: none !important;
        }

        .navbar-nav .nav-link {
            color: rgba(255, 255, 255, 0.95) !important;
            font-weight: 500;
            font-size: 0.85rem;
            padding: 0.5rem 0.8rem !important;
            margin: 0 !important;
            border-radius: 6px;
            transition: all 0.3s ease;
            position: relative;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            background: rgba(255, 255, 255, 0.06) !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
            min-width: 50px;
            text-align: center;
            display: inline-block !important;
            opacity: 1 !important;
            visibility: visible !important;
            white-space: nowrap;
        }

        .navbar-nav .nav-link:hover,
        .navbar-nav .nav-link:focus {
            color: var(--rotaract-gold) !important;
            background-color: rgba(255, 255, 255, 0.12) !important;
            transform: translateY(-1px);
            border-color: var(--rotaract-gold) !important;
            box-shadow: 0 3px 8px rgba(247, 147, 30, 0.25);
            opacity: 1 !important;
            visibility: visible !important;
        }

        .navbar-nav .nav-link.active {
            color: var(--rotaract-gold) !important;
            background-color: rgba(255, 255, 255, 0.15) !important;
            font-weight: 600;
            border-color: var(--rotaract-gold) !important;
            box-shadow: 0 2px 6px rgba(247, 147, 30, 0.3);
            opacity: 1 !important;
            visibility: visible !important;
        }

        .navbar-nav .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 3px;
            left: 50%;
            background: var(--rotaract-gold);
            transition: all 0.3s ease;
            transform: translateX(-50%);
            border-radius: 1px;
        }

        .navbar-nav .nav-link:hover::after,
        .navbar-nav .nav-link.active::after {
            width: 70%;
        }

        /* Dropdown specific styling */
        .navbar-nav .nav-item.dropdown .nav-link {
            padding-right: 1.5rem !important;
        }

        .navbar-nav .nav-item.dropdown .nav-link::before {
            content: '';
            position: absolute;
            right: 0.5rem;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-left: 3px solid transparent;
            border-right: 3px solid transparent;
            border-top: 3px solid currentColor;
            transition: transform 0.3s ease;
        }

        .navbar-nav .nav-item.dropdown.show .nav-link::before {
            transform: translateY(-50%) rotate(180deg);
            left: 20%;
            background: var(--rotaract-gold);
            transition: all 0.3s ease;
            transform: translateX(-50%);
            border-radius: 2px;
        }

        .navbar-nav .nav-link:hover::after,
        .navbar-nav .nav-link.active::after {
            width: 20%;
        }

        /* Dropdown specific styling */
        .navbar-nav .nav-item.dropdown .nav-link {
            padding-right: 1rem !important;
        }

        .navbar-nav .nav-item.dropdown .nav-link::before {
            content: '';
            position: absolute;
            right: 0.2rem;
            top: 50%;
            transform: translateY(-20%);
            width: 0;
            height: 0;
            border-left: 1px solid transparent;
            border-right: 1px solid transparent;
            border-top: 1px solid currentColor;
            transition: transform 0.3s ease;
        }

        .navbar-nav .nav-item.dropdown.show .nav-link::before {
            transform: translateY(-50%) rotate(180deg);
        }

        /* Force visibility for navbar items */
        .navbar-nav,
        .navbar-nav .nav-item,
        .navbar-nav .nav-link {
            opacity: 1 !important;
            visibility: visible !important;
            display: inline-block !important;
        }

        .navbar-collapse.show .navbar-nav,
        .navbar-collapse.show .navbar-nav .nav-item,
        .navbar-collapse.show .navbar-nav .nav-link {
            opacity: 1 !important;
            visibility: visible !important;
            display: inline-block !important;
        }

        /* Enhanced Dropdown Styles */
        .dropdown-menu {
            background: white !important;
            border: none;
            border-radius: 15px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            padding: 1rem 0;
            margin-top: 0.8rem;
            min-width: 280px;
            z-index: 1050 !important;
            border: 3px solid var(--rotaract-gold);
            opacity: 1 !important;
            visibility: visible !important;
            position: absolute !important;
        }

        .dropdown-menu.show {
            opacity: 1 !important;
            visibility: visible !important;
            display: block !important;
        }

        .dropdown-header {
            color: var(--rotaract-blue) !important;
            font-weight: 700;
            padding: 0.5rem 2rem;
            font-size: 0.9rem;
            border-bottom: 2px solid var(--rotaract-gold);
            margin-bottom: 0.5rem;
        }

        .dropdown-item {
            color: var(--rotaract-blue) !important;
            font-weight: 500;
            padding: 1rem 2rem;
            transition: all 0.3s ease;
            border-radius: 0;
            font-size: 0.95rem;
            border-left: 4px solid transparent;
            opacity: 1 !important;
            visibility: visible !important;
            display: flex !important;
            align-items: center;
            cursor: pointer !important;
            text-decoration: none !important;
        }

        .dropdown-item:hover,
        .dropdown-item:focus,
        .dropdown-item:active {
            background-color: rgba(31, 71, 136, 0.1) !important;
            color: var(--rotaract-blue) !important;
            transform: translateX(8px);
            border-left-color: var(--rotaract-gold);
            opacity: 1 !important;
            visibility: visible !important;
            text-decoration: none !important;
        }

        .dropdown-item i {
            width: 30px;
            text-align: center;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .dropdown-item .ms-3 {
            margin-left: 1rem !important;
        }

        .dropdown-item .fw-bold {
            font-weight: 600;
            margin-bottom: 0.2rem;
        }

        .dropdown-item small {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .dropdown-divider {
            border-color: rgba(31, 71, 136, 0.3);
            margin: 0.8rem 0;
            border-width: 2px;
        }

        /* Mobile navbar improvements - Keep menu open and visible */
        @media (max-width: 991.98px) {
            body.mobile-menu-open {
                overflow: hidden;
            }

            .navbar-custom {
                padding: 1rem 0;
            }

            .navbar-collapse {
                background: rgba(31, 71, 136, 0.98) !important;
                margin-top: 1.5rem;
                padding: 2rem;
                border-radius: 15px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                z-index: 1040 !important;
                border: 3px solid var(--rotaract-gold);
                backdrop-filter: blur(10px);
                position: fixed !important;
                top: 80px;
                left: 1rem;
                right: 1rem;
                max-height: calc(100vh - 100px);
                overflow-y: auto;
                opacity: 1 !important;
                visibility: visible !important;
                display: block !important;
            }

            .navbar-collapse.show {
                opacity: 1 !important;
                visibility: visible !important;
                display: block !important;
            }

            /* Mobile navigation - vertical stacking */
            .navbar-nav {
                display: flex !important;
                flex-direction: column !important;
                align-items: stretch !important;
                gap: 0.5rem !important;
                width: 100% !important;
            }

            .navbar-nav .nav-item {
                display: block !important;
                width: 100% !important;
                margin: 0 !important;
            }

            .navbar-nav .nav-link {
                padding: 1.2rem 2rem !important;
                margin: 0 !important;
                border-radius: 12px;
                font-size: 1.1rem;
                text-align: center;
                background: rgba(255, 255, 255, 0.15) !important;
                border: 2px solid rgba(255, 255, 255, 0.3) !important;
                min-width: auto;
                display: block !important;
                width: 100%;
                opacity: 1 !important;
                visibility: visible !important;
            }

            .navbar-nav .nav-link:hover {
                background: rgba(255, 255, 255, 0.25) !important;
                transform: scale(1.02);
                border-color: var(--rotaract-gold) !important;
                opacity: 1 !important;
                visibility: visible !important;
            }

            .dropdown-menu {
                background: rgba(255, 255, 255, 0.98) !important;
                margin-top: 0.5rem;
                border-radius: 12px;
                position: static !important;
                transform: none !important;
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
                border: 2px solid var(--rotaract-gold);
                max-width: 100%;
                opacity: 1 !important;
                visibility: visible !important;
                display: inline !important;
            }

            .dropdown-item {
                padding: 1.2rem 2rem;
                font-size: 1.1rem;
                text-align: center;
                opacity: 1 !important;
                visibility: visible !important;
                display: inline !important;
            }

            /* Mobile menu overlay */
            .navbar-collapse.show::before {
                content: '';
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: -1;
                backdrop-filter: blur(5px);
            }
        }

        /* Navbar toggler improvements */
        .navbar-toggler {
            border: 3px solid rgba(255, 255, 255, 0.4);
            border-radius: 12px;
            padding: 0.8rem;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.1);
        }

        .navbar-toggler:hover,
        .navbar-toggler:focus {
            border-color: var(--rotaract-gold);
            box-shadow: 0 0 0 3px rgba(247, 147, 30, 0.3);
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }

        .navbar-toggler-icon {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.95%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='3' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
            width: 2rem;
            height: 2rem;
        }

        /* Force dropdown visibility */
        .navbar .dropdown-menu {
            position: absolute !important;
            top: 100% !important;
            left: 0 !important;
            z-index: 1050 !important;
            opacity: 1 !important;
            visibility: visible !important;
        }

        .navbar .dropdown-menu-end {
            right: 0 !important;
            left: auto !important;
        }

        /* Large screen enhancements */
        @media (min-width: 992px) {
            .navbar-nav {
                display: flex !important;
                flex-direction: row !important;
                align-items: center !important;
                justify-content: flex-start !important;
                gap: 0.5rem !important;
                width: auto !important;
                margin-left: 2rem !important;
            }

            .navbar-nav .nav-item {
                display: inline-block !important;
                margin: 0 !important;
                flex: none !important;
            }

            .navbar-nav .nav-link {
                box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
                display: inline-block !important;
                white-space: nowrap;
                min-width: 70px;
                text-align: center;
                opacity: 1 !important;
                visibility: visible !important;
            }

            .navbar-nav .nav-link:hover {
                box-shadow: 0 3px 8px rgba(247, 147, 30, 0.25);
            }
        }

        /* Extra large screen optimizations */
        @media (min-width: 1200px) {
            .navbar-nav {
                gap: 0.7rem !important;
                margin-left: 3rem !important;
            }

            .navbar-nav .nav-link {
                font-size: 0.9rem;
                padding: 0.6rem 1rem !important;
                margin: 0;
                min-width: 80px;
                letter-spacing: 0.5px;
                opacity: 1 !important;
                visibility: visible !important;
                display: inline-block !important;
            }

            .navbar-brand {
                font-size: 2rem;
            }
        }

        /* Ultra wide screen optimizations */
        @media (min-width: 1400px) {
            .navbar-nav {
                gap: 0.8rem !important;
                margin-left: 4rem !important;
            }

            .navbar-nav .nav-link {
                font-size: 0.95rem;
                padding: 0.7rem 1.2rem !important;
                min-width: 90px;
            }
        

            .navbar-brand {
                font-size: 2rem;
            }
        }
        

        .navbar .dropdown-menu {
            position: absolute !important;
            top: 100% !important;
            left: 0 !important;
            z-index: 1050 !important;
        }

        .navbar .dropdown-menu-end {
            right: 0 !important;
            left: auto !important;
        }

        /* Hero Section */
        
        .fading-image {
            width: 70%; /* adjust as needed, e.g., 50%, 300px */
            height: auto;
            display: block;
            margin: 0 auto; /* center it */
            -webkit-mask-image: radial-gradient(circle, rgba(0, 0, 0, 1) 70%, rgba(0, 0, 0, 0) 100%);
            mask-image: radial-gradient(circle, rgba(0, 0, 0, 1) 70%, rgba(0, 0, 0, 0) 100%);
            -webkit-mask-size: cover;
            mask-size: cover;
            -webkit-mask-repeat: no-repeat;
            mask-repeat: no-repeat;
            }


        .hero-section {
            background: var(--gradient-primary);
            min-height: 100vh;
            display: flex;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><polygon fill="rgba(255,255,255,0.05)" points="0,0 1000,300 1000,1000 0,700"/></svg>');
            background-size: cover;
        }

        .hero-content {
            position: relative;
            z-index: 2;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 700;
            color: white;
            margin-bottom: 1.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .hero-subtitle {
            font-size: 1.3rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 2rem;
            font-weight: 300;
        }
        

        /* Button Styles */
        .btn-custom {
            padding: 12px 30px;
            font-weight: 600;
            border-radius: 50px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            border: none;
            position: relative;
            overflow: hidden;
            min-width: 140px;
        }

        .btn-primary-custom {
            background: var(--rotaract-gold);
            color: white;
        }

        .btn-primary-custom:hover {
            background: #e6841a;
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(247, 147, 30, 0.4);
        }

        .btn-outline-custom {
            background: transparent;
            color: white;
            border: 2px solid white;
        }

        .btn-outline-custom:hover {
            background: white;
            color: var(--rotaract-blue);
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 255, 255, 0.3);
        }

        /* Card Styles */
        .card-custom {
            border: none;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            overflow: hidden;
            background: white;
        }

        .card-custom:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .card-icon {
            width: 80px;
            height: 80px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            color: white;
            font-size: 2rem;
            transition: all 0.3s ease;
        }

        .card-custom:hover .card-icon {
            transform: scale(1.1) rotate(5deg);
        }

        /* Section Styles */
        .section-padding {
            padding: 100px 0;
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--rotaract-blue);
            margin-bottom: 1rem;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--rotaract-gold);
            border-radius: 2px;
        }

        .section-subtitle {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 3rem;
            font-weight: 300;
        }

        /* Gallery Styles */
        .gallery-filter .btn {
            margin: 0.25rem;
            border-radius: 25px;
            padding: 0.5rem 1.5rem;
            transition: all 0.3s ease;
        }

        .gallery-filter .btn.active {
            background-color: var(--rotaract-blue);
            border-color: var(--rotaract-blue);
            color: white;
        }

        .gallery-card {
            position: relative;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .gallery-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        .gallery-card img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .gallery-card:hover img {
            transform: scale(1.1);
        }

        .gallery-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, transparent 0%, rgba(0, 0, 0, 0.8) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            display: flex;
            align-items: flex-end;
            padding: 1.5rem;
        }

        .gallery-card:hover .gallery-overlay {
            opacity: 1;
        }

        .gallery-content {
            color: white;
            text-align: left;
        }

        .gallery-content h5 {
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .gallery-content p {
            margin-bottom: 1rem;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .gallery-item {
            transition: all 0.3s ease;
        }

        .gallery-item.hidden {
            opacity: 0;
            transform: scale(0.8);
            pointer-events: none;
        }

        /* Footer Styles */
        .footer-link {
            color: #d1d5db !important;
            text-decoration: none;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            font-size: 0.95rem;
        }

        .footer-link:hover {
            color: var(--rotaract-gold) !important;
            transform: translateX(5px);
            text-decoration: none;
        }

        .social-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transition: all 0.3s ease;
            text-decoration: none;
            color: white;
        }

        .social-link:hover {
            background: var(--rotaract-gold);
            color: white !important;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(247, 147, 30, 0.4);
        }

        .footer-links h6,
        .footer-contact h6 {
            border-bottom: 2px solid var(--rotaract-gold);
            padding-bottom: 0.5rem;
            display: inline-block;
        }

        /* Portal Feature Cards */
        .portal-feature-card {
            transition: all 0.3s ease;
            border: none;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .portal-feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            cursor: pointer;
        }

        .portal-feature-card .card-body {
            transition: all 0.3s ease;
        }

        .portal-feature-card:hover .card-body {
            background: linear-gradient(135deg, rgba(31, 71, 136, 0.05) 0%, rgba(247, 147, 30, 0.05) 100%);
        }

        /* Modal Styles */
        .modal-custom .modal-content {
            border: none;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .modal-custom .modal-header {
            background: var(--gradient-primary);
            color: white;
            border-radius: 20px 20px 0 0;
            border: none;
        }

        .modal-custom .btn-close {
            filter: invert(1);
        }

        .modal-xl {
            max-width: 95%;
        }

        @media (min-width: 1200px) {
            .modal-xl {
                max-width: 1140px;
            }
        }

        /* Loading Animation */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(31, 71, 136, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid var(--rotaract-gold);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }
            
            .hero-subtitle {
                font-size: 1.1rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .btn-custom {
                padding: 10px 20px;
                font-size: 0.9rem;
                min-width: 120px;
            }
            
            .btn-lg.btn-custom {
                padding: 12px 24px;
                font-size: 1rem;
            }

            .footer-bottom-links {
                text-align: center !important;
                margin-top: 1rem;
            }
            
            .footer-bottom-links .footer-link {
                display: block;
                margin: 0.5rem 0 !important;
            }
            
            .social-links .d-flex {
                justify-content: center;
            }
            
            .contact-item {
                margin-bottom: 1.5rem !important;
            }
        }

        @media (max-width: 576px) {
            .btn-custom {
                margin-bottom: 0.5rem;
            }
        }

        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .btn-custom:focus,
        .nav-link:focus,
        .footer-link:focus,
        .social-link:focus {
            outline: 2px solid var(--rotaract-gold);
            outline-offset: 2px;
        }

        /* Utility Classes */
        .text-rotaract-blue {
            color: var(--rotaract-blue) !important;
        }

        .text-rotaract-gold {
            color: var(--rotaract-gold) !important;
        }

        .bg-rotaract-blue {
            background-color: var(--rotaract-blue) !important;
        }

        .bg-rotaract-gold {
            background-color: var(--rotaract-gold) !important;
        }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="text-center text-white">
            <div class="loading-spinner mb-3"></div>
            <p class="mb-0">Loading Rotaract Club...</p>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark navbar-custom fixed-top" id="mainNavbar">
        <div class="container-fluid px-lg-5">
            <a class="navbar-brand d-flex align-items-center" href="#home">
                <img src="/uploads/images/logo.jpeg" alt="Rotaract Club Logo" height="50" width="50" class="me-2">
                <span class="fw-bold">Rotaract Club</span>
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#home">
                            <i class="fas fa-home me-1"></i>Home
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about">
                            <i class="fas fa-info-circle me-1"></i>About
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#events">
                            <i class="fas fa-calendar-alt me-1"></i>Events
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#initiatives">
                            <i class="fas fa-lightbulb me-1"></i>Initiatives
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#gallery">
                            <i class="fas fa-images me-1"></i>Gallery
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#contact">
                            <i class="fas fa-envelope me-1"></i>Contact
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="loginDropdown" role="button" 
                           data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-sign-in-alt me-1"></i>Login
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" id="loginDropdownMenu" style="display: none;">
                            <!-- Login options will be populated when dropdown is clicked -->
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6 hero-content">
                    <h1 class="hero-title animate-slideInLeft">
                        Rotaract Club
                        <span class="d-block text-warning">Community Service</span>
                    </h1>
                    <p class="hero-subtitle animate-slideInLeft animate-delay-2">
                        Empowering young leaders to create positive change in our community through service, 
                        fellowship and professional development.
                    </p>
                    <div class="animate-slideInLeft animate-delay-4">
                        <div class="d-flex flex-column flex-sm-row gap-3">
                            <!-- <button class="btn btn-custom btn-primary-custom btn-lg" onclick="openJoinModal()">
                                <i class="fas fa-users me-2"></i>Donate
                            </button> -->
                            <button>
                                
                                <a href="/donate" class="btn btn-custom btn-primary-custom btn-outline-primary btn-lg btn-animate w-100" id="testBtn1">
                                    <i class="fas fa-heart me-2"></i>Donate
                                </a>
                            
                            </button>
                            <!-- <button class="btn btn-custom btn-outline-custom btn-lg" onclick="scrollToSection('about')">
                                <i class="fas fa-info-circle me-2"></i>Learn More
                            </button> -->
                        </div>
                    </div>
                </div>
                <!-- <div class="col-lg-6 text-center">
                    <div class="animate-slideInRight animate-float">
                        <img src="/uploads/images/hands33.jpeg" 
                             alt="Rotaract Community Service" class="img-fluid fading-image" style="max-height: 500px;">
                    </div>
                </div> -->
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="section-padding bg-light">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center mb-5">
                    <h2 class="section-title animate-fadeInUp">About Rotaract</h2>
                    <p class="section-subtitle animate-fadeInUp animate-delay-2">
                        Discover our mission, values and commitment to community service
                    </p>
                </div>
            </div>
            <div class="row g-4">
                <div class="col-lg-4 col-md-6">
                    <div class="card card-custom h-100 animate-fadeInUp animate-delay-1">
                        <div class="card-body text-center p-4">
                            <div class="card-icon">
                                <i class="fas fa-heart"></i>
                            </div>
                            <h4 class="mb-3">Community Service</h4>
                            <p class="text-muted">
                                We organize impactful community service projects that address local needs 
                                and create lasting positive change in our neighborhoods.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="card card-custom h-100 animate-fadeInUp animate-delay-2">
                        <div class="card-body text-center p-4">
                            <div class="card-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <h4 class="mb-3">Leadership Development</h4>
                            <p class="text-muted">
                                Through hands-on experience and mentorship, we develop the next generation 
                                of community leaders and changemakers.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="card card-custom h-100 animate-fadeInUp animate-delay-3">
                        <div class="card-body text-center p-4">
                            <div class="card-icon">
                                <i class="fas fa-globe"></i>
                            </div>
                            <h4 class="mb-3">Global Network</h4>
                            <p class="text-muted">
                                Connect with like-minded individuals worldwide through Rotaract's 
                                international network of service-oriented young professionals.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Events Section -->
    <section id="events" class="section-padding">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center mb-5">
                    <h2 class="section-title animate-fadeInUp">Upcoming Events</h2>
                    <p class="section-subtitle animate-fadeInUp animate-delay-2">
                        Join us in our upcoming community service events and activities
                    </p>
                </div>
            </div>
            <div class="row g-4">
                <div class="col-lg-4 col-md-6">
                    <div class="card card-custom h-100 animate-fadeInUp animate-delay-1">
                        <div class="card-body p-4">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <span class="badge bg-primary">Community Service</span>
                                <small class="text-muted">Aug 25, 2025</small>
                            </div>
                            <h5 class="card-title">Community Education Drive</h5>
                            <img src="/uploads/images/event pasti.jpeg">
                            <p class="card-text text-muted">
                                Join us for a community-wide educating initiative to make children learn 
                                and provide them with basic supplies. 
                            </p>
                            <!-- <button class="btn btn-custom btn-primary-custom w-100" onclick="showEventDetails(1)">
                                <i class="fas fa-info-circle me-2"></i>Learn More
                            </button> -->
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6">
                    <div class="card card-custom h-100 animate-fadeInUp animate-delay-2">
                        <div class="card-body p-4">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <span class="badge bg-danger">Health</span>
                                <small class="text-muted">July 31, 2025</small>
                            </div>
                            <h5 class="card-title">Blood Donation Camp</h5>
                            <img src="/uploads/images/blood.jpeg">
                            <p class="card-text text-muted">
                                Help save lives by participating in our quarterly blood donation drive 
                                in partnership with local hospitals.
                            </p>
                            <!-- <button class="btn btn-custom btn-primary-custom w-100" onclick="showEventDetails(2)">
                                <i class="fas fa-info-circle me-2"></i>Learn More
                            </button> -->
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="card card-custom h-100 animate-fadeInUp animate-delay-3">
                        <div class="card-body p-4">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <span class="badge bg-success">Education</span>
                                <small class="text-muted">Aug 8, 2025</small>
                            </div>
                            <h5 class="card-title">Youth Leadership Workshop</h5>
                            <img src="/uploads/images/khushi event.jpeg">
                            <p class="card-text text-muted">
                                Develop essential leadership skills through interactive workshops 
                                and networking sessions with experienced leaders.
                            </p>
                            <!-- <button class="btn btn-custom btn-primary-custom w-100" onclick="showEventDetails(3)">
                                <i class="fas fa-info-circle me-2"></i>Learn More
                            </button> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Initiatives Section -->
    <section id="initiatives" class="section-padding bg-light">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center mb-5">
                    <h2 class="section-title animate-fadeInUp">Our Initiatives</h2>
                    <p class="section-subtitle animate-fadeInUp animate-delay-2">
                        Discover our ongoing projects and community impact programs
                    </p>
                </div>
            </div>
            <div class="row g-4">
                <div class="col-lg-4 col-md-6">
                    <div class="card card-custom h-100 animate-fadeInUp animate-delay-1">
                        <div class="card-body text-center p-4">
                            <div class="card-icon">
                                <i class="fas fa-graduation-cap"></i>
                            </div>
                            <h4 class="mb-3">Education Support</h4>
                            <p class="text-muted">
                                Providing educational resources, scholarships, and mentorship programs 
                                to underprivileged students in our community.
                            </p>
                            <!-- <button class="btn btn-custom btn-primary-custom" onclick="showInitiativeDetails('education')"> -->
                                <!-- <i class="fas fa-info-circle me-2"></i>Learn More -->
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="card card-custom h-100 animate-fadeInUp animate-delay-2">
                        <div class="card-body text-center p-4">
                            <div class="card-icon">
                                <i class="fas fa-heartbeat"></i>
                            </div>
                            <h4 class="mb-3">Health & Wellness</h4>
                            <p class="text-muted">
                                Organizing health camps, blood donation drives, and wellness awareness 
                                programs for community health improvement.
                            </p>
                            <!-- <button class="btn btn-custom btn-primary-custom" onclick="showInitiativeDetails('health')"> -->
                                <!-- <i class="fas fa-info-circle me-2"></i>Learn More -->
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="card card-custom h-100 animate-fadeInUp animate-delay-3">
                        <div class="card-body text-center p-4">
                            <div class="card-icon">
                                <i class="fas fa-leaf"></i>
                            </div>
                            <h4 class="mb-3">Environmental Care</h4>
                            <p class="text-muted">
                                Leading environmental conservation efforts through tree plantation, 
                                cleanup drives, and sustainability awareness campaigns.
                            </p>
                            <!-- <button class="btn btn-custom btn-primary-custom" onclick="showInitiativeDetails('environment')"> -->
                                <!-- <i class="fas fa-info-circle me-2"></i>Learn More -->
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="card card-custom h-100 animate-fadeInUp animate-delay-4">
                        <div class="card-body text-center p-4">
                            <div class="card-icon">
                                <i class="fas fa-hands-helping"></i>
                            </div>
                            <h4 class="mb-3">Community Outreach</h4>
                            <p class="text-muted">
                                Reaching out to vulnerable communities with food drives, clothing 
                                donations, and essential support services.
                            </p>
                            <!-- <button class="btn btn-custom btn-primary-custom" onclick="showInitiativeDetails('community')"> -->
                                <!-- <i class="fas fa-info-circle me-2"></i>Learn More -->
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="card card-custom h-100 animate-fadeInUp animate-delay-5">
                        <div class="card-body text-center p-4">
                            <div class="card-icon">
                                <i class="fas fa-users-cog"></i>
                            </div>
                            <h4 class="mb-3">Skill Development</h4>
                            <p class="text-muted">
                                Conducting workshops and training programs to enhance professional 
                                and personal skills of youth in our community.
                            </p>
                            <!-- <button class="btn btn-custom btn-primary-custom" onclick="showInitiativeDetails('skills')"> -->
                                <!-- <i class="fas fa-info-circle me-2"></i>Learn More -->
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="card card-custom h-100 animate-fadeInUp animate-delay-6">
                        <div class="card-body text-center p-4">
                            <div class="card-icon">
                                <i class="fas fa-globe-americas"></i>
                            </div>
                            <h4 class="mb-3">Global Partnerships</h4>
                            <p class="text-muted">
                                Collaborating with international Rotaract clubs for global service 
                                projects and cultural exchange programs.
                            </p>
                            <!-- <button class="btn btn-custom btn-primary-custom" onclick="showInitiativeDetails('global')"> -->
                                <!-- <i class="fas fa-info-circle me-2"></i>Learn More -->
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Gallery Section -->
    <section id="gallery" class="section-padding">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center mb-5">
                    <h2 class="section-title animate-fadeInUp">Photo Gallery</h2>
                    <p class="section-subtitle animate-fadeInUp animate-delay-2">
                        Capturing moments of service, fellowship, and community impact
                    </p>
                </div>
            </div>
            
            <!-- Gallery Filter Tabs -->
            <div class="row mb-4">
                <div class="col-12 text-center">
                    <div class="btn-group gallery-filter" role="group" aria-label="Gallery Filter">
                        <button type="button" class="btn btn-outline-primary active" data-filter="all">
                            <i class="fas fa-th me-2"></i>All Photos
                        </button>
                        <button type="button" class="btn btn-outline-primary" data-filter="events">
                            <i class="fas fa-calendar me-2"></i>Events
                        </button>
                        <button type="button" class="btn btn-outline-primary" data-filter="service">
                            <i class="fas fa-hands-helping me-2"></i>Service Projects
                        </button>
                        <button type="button" class="btn btn-outline-primary" data-filter="meetings">
                            <i class="fas fa-users me-2"></i>Meetings
                        </button>
                    </div>
                </div>
            </div>

            <!-- Gallery Grid -->
            <div class="row g-3" id="galleryGrid">
                <div class="col-lg-4 col-md-6 gallery-item" data-category="events">
                    <div class="gallery-card">
                        <img src="/uploads/images/oldage.jpeg" alt="Community Service Event" class="img-fluid">
                        <div class="gallery-overlay">
                            <div class="gallery-content">
                                <h5>Community Drive</h5>
                                <p>Growing the community and sharing joy with everyone</p>
                                <!-- <button class="btn btn-light btn-sm" onclick="openImageModal('https://via.placeholder.com/800x600/1f4788/ffffff?text=Community+Cleanup+Drive', 'Community Cleanup Drive')">
                                    <i class="fas fa-expand me-2"></i>View
                                </button> -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6 gallery-item" data-category="service">
                    <div class="gallery-card">
                        <img src="/uploads/images/blood donation camp.jpeg" alt="Blood Donation Camp" class="img-fluid">
                        <div class="gallery-overlay">
                            <div class="gallery-content">
                                <h5>Blood Donation Camp</h5>
                                <p>Saving lives through blood donation</p>
                                <!-- <button class="btn btn-light btn-sm" onclick="openImageModal('https://via.placeholder.com/800x600/dc143c/ffffff?text=Blood+Donation+Camp', 'Blood Donation Camp')">
                                    <i class="fas fa-expand me-2"></i>View
                                </button> -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6 gallery-item" data-category="meetings">
                    <div class="gallery-card">
                        <img src="/uploads/images/club.jpeg" alt="Club Meeting" class="img-fluid">
                        <div class="gallery-overlay">
                            <div class="gallery-content">
                                <h5>Monthly Club Meeting</h5>
                                <p>Planning our next community initiatives</p>
                                <!-- <button class="btn btn-light btn-sm" onclick="openImageModal('https://via.placeholder.com/800x600/f7931e/ffffff?text=Monthly+Club+Meeting', 'Monthly Club Meeting')">
                                    <i class="fas fa-expand me-2"></i>View
                                </button> -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6 gallery-item" data-category="events">
                    <div class="gallery-card">
                        <img src="/uploads/images/youth.jpeg" alt="Youth Leadership Workshop" class="img-fluid">
                        <div class="gallery-overlay">
                            <div class="gallery-content">
                                <h5>Leadership Workshop</h5>
                                <p>Developing future leaders</p>
                                <!-- <button class="btn btn-light btn-sm" onclick="openImageModal('https://via.placeholder.com/800x600/28a745/ffffff?text=Leadership+Workshop', 'Leadership Workshop')">
                                    <i class="fas fa-expand me-2"></i>View
                                </button> -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6 gallery-item" data-category="service">
                    <div class="gallery-card">
                        <img src="/uploads/images/donation.jpeg" alt="Education Support" class="img-fluid">
                        <div class="gallery-overlay">
                            <div class="gallery-content">
                                <h5>Education Support Program</h5>
                                <p>Supporting underprivileged students</p>
                                <!-- <button class="btn btn-light btn-sm" onclick="openImageModal('https://via.placeholder.com/800x600/17a2b8/ffffff?text=Education+Support+Program', 'Education Support Program')">
                                    <i class="fas fa-expand me-2"></i>View
                                </button> -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6 gallery-item" data-category="events">
                    <div class="gallery-card">
                        <img src="/uploads/images/img1.jpeg" alt="Fundraising Gala" class="img-fluid">
                        <div class="gallery-overlay">
                            <div class="gallery-content">
                                <h5>Annual Fundraising Gala</h5>
                                <p>Raising funds for community projects</p>
                                <!-- <button class="btn btn-light btn-sm" onclick="openImageModal('https://via.placeholder.com/800x600/6f42c1/ffffff?text=Annual+Fundraising+Gala', 'Annual Fundraising Gala')">
                                    <i class="fas fa-expand me-2"></i>View
                                </button> -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Load More Button -->
            <!-- <div class="row mt-4">
                <div class="col-12 text-center">
                    <button class="btn btn-outline-primary btn-lg" id="loadMoreGallery">
                        <i class="fas fa-plus me-2"></i>Load More Photos
                    </button>
                </div>
            </div>
        </div> -->
    </section>

    <!-- Contact Section -->
    <section id="contact" class="section-padding bg-light">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center mb-5">
                    <h2 class="section-title animate-fadeInUp">Get In Touch</h2>
                    <p class="section-subtitle animate-fadeInUp animate-delay-2">
                        Have questions or want to get involved? We'd love to hear from you!
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-8 mx-auto">
                    <form id="contactForm" class="animate-fadeInUp animate-delay-3">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="name" class="form-label">Full Name *</label>
                                <input type="text" class="form-control" id="name" name="name" required>
                            </div>
                            <div class="col-md-6">
                                <label for="email" class="form-label">Email Address *</label>
                                <input type="email" class="form-control" id="email" name="email" required>
                            </div>
                            <div class="col-12">
                                <label for="subject" class="form-label">Subject *</label>
                                <input type="text" class="form-control" id="subject" name="subject" required>
                            </div>
                            <div class="col-12">
                                <label for="message" class="form-label">Message *</label>
                                <textarea class="form-control" id="message" name="message" rows="5" required></textarea>
                            </div>
                            <div class="col-12 text-center">
                                <button type="submit" class="btn btn-custom btn-primary-custom btn-lg">
                                    <i class="fas fa-paper-plane me-2"></i>Send Message
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Temporary Test Section for Login Functionality -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1000;">
        <div class="card shadow">
            <div class="card-body p-2">
                <h6 class="card-title mb-2 small">Test Login Functions</h6>
                <div class="d-grid gap-1">
                    <button class="btn btn-primary btn-sm" onclick="window.openLoginModal('member')">
                        <i class="fas fa-user me-1"></i>Member
                    </button>
                    <button class="btn btn-success btn-sm" onclick="window.openLoginModal('bod')">
                        <i class="fas fa-user-tie me-1"></i>BOD
                    </button>
                    <button class="btn btn-warning btn-sm" onclick="window.openLoginModal('core')">
                        <i class="fas fa-users-cog me-1"></i>Core
                    </button>
                    <button class="btn btn-info btn-sm" onclick="window.openJoinModal()">
                        <i class="fas fa-user-plus me-1"></i>Join
                    </button>
                    <hr class="my-2">
                    <small class="text-muted">After Login:</small>
                    <button class="btn btn-outline-primary btn-sm" onclick="testPortalFunction()">
                        <i class="fas fa-tachometer-alt me-1"></i>Portal
                    </button>
                    <button class="btn btn-outline-secondary btn-sm" onclick="testProfileFunction()">
                        <i class="fas fa-user me-1"></i>Profile
                    </button>
                    <button class="btn btn-outline-danger btn-sm" onclick="testLogoutFunction()">
                        <i class="fas fa-sign-out-alt me-1"></i>Logout
                    </button>
                    <hr class="my-2">
                    <button class="btn btn-outline-info btn-sm" onclick="testAllFunctions()">
                        <i class="fas fa-vial me-1"></i>Test All
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Test functions for debugging - Enhanced version
        function testPortalFunction() {
            console.log('=== Testing Portal Function ===');
            console.log('Function available:', typeof window.openUserPortal === 'function');
            
            const userData = JSON.parse(localStorage.getItem('rotaractUser') || '{}');
            console.log('User logged in:', !!userData.email);
            console.log('User data:', userData);
            
            if (!userData.email) {
                showAlert('warning', 'Please login first to test portal function');
                return;
            }
            
            if (typeof window.openUserPortal === 'function') {
                console.log('Calling openUserPortal...');
                window.openUserPortal();
            } else {
                console.error('openUserPortal function not found');
                showAlert('error', 'Portal function not available - check console');
            }
        }

        function testProfileFunction() {
            console.log('=== Testing Profile Function ===');
            console.log('Function available:', typeof window.showUserProfile === 'function');
            
            const userData = JSON.parse(localStorage.getItem('rotaractUser') || '{}');
            console.log('User logged in:', !!userData.email);
            console.log('User data:', userData);
            
            if (!userData.email) {
                showAlert('warning', 'Please login first to test profile function');
                return;
            }
            
            if (typeof window.showUserProfile === 'function') {
                console.log('Calling showUserProfile...');
                window.showUserProfile();
            } else {
                console.error('showUserProfile function not found');
                showAlert('error', 'Profile function not available - check console');
            }
        }

        function testLogoutFunction() {
            console.log('=== Testing Logout Function ===');
            console.log('Function available:', typeof window.logoutUser === 'function');
            
            const userData = JSON.parse(localStorage.getItem('rotaractUser') || '{}');
            console.log('User logged in:', !!userData.email);
            
            if (!userData.email) {
                showAlert('warning', 'No user logged in to logout');
                return;
            }
            
            if (typeof window.logoutUser === 'function') {
                console.log('Calling logoutUser...');
                window.logoutUser();
            } else {
                console.error('logoutUser function not found');
                showAlert('error', 'Logout function not available - check console');
            }
        }

        function testAllFunctions() {
            console.log('=== Testing All Functions ===');
            
            // Check function availability
            const functions = {
                openUserPortal: typeof window.openUserPortal === 'function',
                showUserProfile: typeof window.showUserProfile === 'function',
                logoutUser: typeof window.logoutUser === 'function',
                openLoginModal: typeof window.openLoginModal === 'function',
                openJoinModal: typeof window.openJoinModal === 'function'
            };
            
            console.log('Function availability:', functions);
            
            // Check user login status
            const userData = JSON.parse(localStorage.getItem('rotaractUser') || '{}');
            console.log('User login status:', {
                loggedIn: !!userData.email,
                userData: userData
            });
            
            // Check dropdown elements
            const loginDropdown = document.getElementById('loginDropdown');
            const dropdownMenu = document.getElementById('loginDropdownMenu');
            console.log('Dropdown elements:', {
                loginDropdown: !!loginDropdown,
                dropdownMenu: !!dropdownMenu
            });
            
            // Summary
            const allFunctionsAvailable = Object.values(functions).every(f => f);
            const message = allFunctionsAvailable 
                ? 'All functions are available!' 
                : 'Some functions are missing - check console';
                
            showAlert(allFunctionsAvailable ? 'success' : 'warning', message);
        }

        // Force initialize functions on page load
        function forceInitializeFunctions() {
            console.log('Force initializing functions...');
            
            // Ensure global functions exist
            if (typeof window.openUserPortal !== 'function') {
                window.openUserPortal = function() {
                    console.log('Emergency openUserPortal called');
                    const userData = JSON.parse(localStorage.getItem('rotaractUser') || '{}');
                    if (!userData.email) {
                        showAlert('error', 'Please login first');
                        return;
                    }
                    createBasicPortalModal(userData);
                };
            }
            
            if (typeof window.showUserProfile !== 'function') {
                window.showUserProfile = function() {
                    console.log('Emergency showUserProfile called');
                    const userData = JSON.parse(localStorage.getItem('rotaractUser') || '{}');
                    if (!userData.email) {
                        showAlert('error', 'Please login first');
                        return;
                    }
                    createUserProfileModal(userData);
                };
            }
            
            if (typeof window.logoutUser !== 'function') {
                window.logoutUser = function() {
                    console.log('Emergency logoutUser called');
                    localStorage.removeItem('rotaractUser');
                    const loginDropdown = document.getElementById('loginDropdown');
                    if (loginDropdown) {
                        loginDropdown.innerHTML = '<i class="fas fa-sign-in-alt me-1"></i>Login';
                    }
                    showAlert('success', 'Logged out successfully');
                };
            }
            
            console.log('Emergency functions initialized');
        }

        // Helper function to create basic portal modal
        function createBasicPortalModal(userData) {
            const modalHtml = `
                <div class="modal fade" id="emergencyPortalModal" tabindex="-1">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">
                                    <i class="fas fa-user-circle me-2"></i>
                                    ${userData.name || userData.email} Portal
                                </h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle me-2"></i>
                                    Emergency portal loaded. Role: ${userData.role || 'Member'}
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="card">
                                            <div class="card-body text-center">
                                                <i class="fas fa-calendar-alt fa-2x text-primary mb-2"></i>
                                                <h6>My Events</h6>
                                                <p class="text-muted small">View registered events</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card">
                                            <div class="card-body text-center">
                                                <i class="fas fa-user fa-2x text-success mb-2"></i>
                                                <h6>My Profile</h6>
                                                <p class="text-muted small">Update profile information</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Remove existing modal
            const existingModal = document.getElementById('emergencyPortalModal');
            if (existingModal) existingModal.remove();
            
            // Add new modal
            document.body.insertAdjacentHTML('beforeend', modalHtml);
            
            // Show modal
            const modal = new bootstrap.Modal(document.getElementById('emergencyPortalModal'));
            modal.show();
        }

        // Helper function to create user profile modal
        function createUserProfileModal(userData) {
            const modalHtml = `
                <div class="modal fade" id="emergencyProfileModal" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">
                                    <i class="fas fa-user me-2"></i>
                                    User Profile
                                </h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <div class="text-center mb-3">
                                    <div class="bg-primary rounded-circle d-inline-flex align-items-center justify-content-center" 
                                         style="width: 80px; height: 80px;">
                                        <i class="fas fa-user fa-2x text-white"></i>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-4"><strong>Name:</strong></div>
                                    <div class="col-sm-8">${userData.name || 'Not provided'}</div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-sm-4"><strong>Email:</strong></div>
                                    <div class="col-sm-8">${userData.email}</div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-sm-4"><strong>Role:</strong></div>
                                    <div class="col-sm-8">
                                        <span class="badge bg-primary">${userData.role || 'Member'}</span>
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-sm-4"><strong>Login Time:</strong></div>
                                    <div class="col-sm-8">${userData.loginTime || 'Unknown'}</div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary">Edit Profile</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Remove existing modal
            const existingModal = document.getElementById('emergencyProfileModal');
            if (existingModal) existingModal.remove();
            
            // Add new modal
            document.body.insertAdjacentHTML('beforeend', modalHtml);
            
            // Show modal
            const modal = new bootstrap.Modal(document.getElementById('emergencyProfileModal'));
            modal.show();
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(forceInitializeFunctions, 1000);
        });
    </script>

    <!-- Footer -->
    <footer class="py-5 mt-5" style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); border-top: 3px solid var(--rotaract-gold);">
        <div class="container">
            <div class="row g-4">
                <!-- Brand Section -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="footer-brand">
                        <h4 class="mb-3 d-flex align-items-center text-white">
                            <i class="fas fa-hands-helping me-3 text-warning fs-3"></i>
                            <span class="fw-bold">Rotaract Club</span>
                        </h4>
                        <p class="text-light mb-4" style="line-height: 1.6;">
                            Empowering young leaders to create positive change through community service, 
                            leadership development, and global networking.
                        </p>
                        <div class="social-links">
                            <h6 class="mb-3 text-warning">Follow Us</h6>
                            <div class="d-flex gap-3">
                                <a href="#" class="social-link" aria-label="Facebook" title="Facebook">
                                    <i class="fab fa-facebook-f fs-5"></i>
                                </a>
                                <a href="#" class="social-link" aria-label="Twitter" title="Twitter">
                                    <i class="fab fa-twitter fs-5"></i>
                                </a>
                                <a href="#" class="social-link" aria-label="Instagram" title="Instagram">
                                    <i class="fab fa-instagram fs-5"></i>
                                </a>
                                <a href="#" class="social-link" aria-label="LinkedIn" title="LinkedIn">
                                    <i class="fab fa-linkedin-in fs-5"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Links -->
                <div class="col-lg-2 col-md-6 col-sm-6 mb-4">
                    <div class="footer-links">
                        <h6 class="mb-3 text-warning fw-bold">
                            <i class="fas fa-link me-2"></i>Quick Links
                        </h6>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <a href="#about" class="footer-link">
                                    <i class="fas fa-chevron-right me-2 small"></i>About Us
                                </a>
                            </li>
                            <li class="mb-2">
                                <a href="#events" class="footer-link">
                                    <i class="fas fa-chevron-right me-2 small"></i>Events
                                </a>
                            </li>
                            <li class="mb-2">
                                <a href="#initiatives" class="footer-link">
                                    <i class="fas fa-chevron-right me-2 small"></i>Initiatives
                                </a>
                            </li>
                            <li class="mb-2">
                                <a href="#gallery" class="footer-link">
                                    <i class="fas fa-chevron-right me-2 small"></i>Gallery
                                </a>
                            </li>
                            <li class="mb-2">
                                <a href="#contact" class="footer-link">
                                    <i class="fas fa-chevron-right me-2 small"></i>Contact
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                
                <!-- Member Portal -->
                <div class="col-lg-3 col-md-6 col-sm-6 mb-4">
                    <div class="footer-links">
                        <h6 class="mb-3 text-warning fw-bold">
                            <i class="fas fa-users me-2"></i>Member Portal
                        </h6>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <a href="#" class="footer-link" onclick="openLoginModal('member')">
                                    <i class="fas fa-user me-2"></i>Member Login
                                </a>
                            </li>
                            <li class="mb-2">
                                <a href="#" class="footer-link" onclick="openLoginModal('bod')">
                                    <i class="fas fa-user-tie me-2"></i>BOD Portal
                                </a>
                            </li>
                            <li class="mb-2">
                                <a href="#" class="footer-link" onclick="openLoginModal('core')">
                                    <i class="fas fa-users-cog me-2"></i>Core Team
                                </a>
                            </li>
                            <li class="mb-2">
                                <a href="#" class="footer-link text-success" onclick="openJoinModal()">
                                    <i class="fas fa-user-plus me-2"></i>Join Us
                                </a>
                            </li>
                            <li class="mb-2">
                                <a href="#" class="footer-link">
                                    <i class="fas fa-hands-helping me-2"></i>Volunteer
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                
                <!-- Contact Info -->
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="footer-contact">
                        <h6 class="mb-3 text-warning fw-bold">
                            <i class="fas fa-address-book me-2"></i>Contact Info
                        </h6>
                        <div class="contact-info">
                            <div class="contact-item mb-3 d-flex align-items-start">
                                <i class="fas fa-envelope text-warning me-3 mt-1"></i>
                                <div>
                                    <strong class="text-white">Email:</strong><br>
                                    <a href="mailto:info@rotaractclub.org" class="footer-link">
                                        info@rotaractclub.org
                                    </a>
                                </div>
                            </div>
                            <div class="contact-item mb-3 d-flex align-items-start">
                                <i class="fas fa-phone text-warning me-3 mt-1"></i>
                                <div>
                                    <strong class="text-white">Phone:</strong><br>
                                    <a href="tel:+91 9427807207" class="footer-link">
                                        +91 9427807207
                                    </a>
                                </div>
                            </div>
                            <div class="contact-item mb-3 d-flex align-items-start">
                                <i class="fas fa-map-marker-alt text-warning me-3 mt-1"></i>
                                <div>
                                    <strong class="text-white">Address:</strong><br>
                                    <span class="text-light">NEW LJIET<br>Ahmedabad, Gujarat 380054</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Footer Bottom -->
            <hr class="my-4 border-secondary">
            <div class="row align-items-center">
                <div class="col-md-6 mb-3 mb-md-0">
                    <p class="mb-0 text-light">
                        &copy; 2024 Rotaract Club. All rights reserved.
                    </p>
                </div>
                <div class="col-md-6">
                    <div class="footer-bottom-links text-md-end">
                        <a href="#" class="footer-link me-3">
                            <i class="fas fa-shield-alt me-1"></i>Privacy Policy
                        </a>
                        <a href="#" class="footer-link me-3">
                            <i class="fas fa-file-contract me-1"></i>Terms of Service
                        </a>
                        <a href="#" class="footer-link">
                            <i class="fas fa-sitemap me-1"></i>Sitemap
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Modals -->
    <!-- Login Modal -->
    <div class="modal fade modal-custom" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="loginModalLabel">Member Login</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <!-- Demo Credentials Info -->
                    <div class="alert alert-info mb-4">
                        <h6 class="fw-bold mb-2">
                            <i class="fas fa-info-circle me-2"></i>Demo Login Credentials
                            </h6>

                            <div class="row g-2 small">
                            <div class="col-12 col-md-4">
                                <div class="p-2 border rounded bg-light" style="font-size: 0.85rem; word-break: break-word;">
                                <strong>Member:</strong><br>
                                <div>Email:<br><code>member@rotaract.org</code></div>
                                <div>Password:<br><code>member123</code></div>
                                </div>
                            </div>

                            <div class="col-12 col-md-4">
                                <div class="p-2 border rounded bg-light" style="font-size: 0.85rem; word-break: break-word;">
                                <strong>BOD:</strong><br>
                                <div>Email:<br><code>president@rotaract.org</code></div>
                                <div>Password:<br><code>bod123</code></div>
                                </div>
                            </div>

                            <div class="col-12 col-md-4">
                                <div class="p-2 border rounded bg-light" style="font-size: 0.85rem; word-break: break-word;">
                                <strong>Core Team:</strong><br>
                                <div>Email:<br><code>core@rotaract.org</code></div>
                                <div>Password:<br><code>core123</code></div>
                                </div>
                            </div>
                            </div>
                    </div>
                    
                    <form id="loginForm">
                        <div class="mb-3">
                            <label for="loginEmail" class="form-label">Email Address</label>
                            <input type="email" class="form-control" id="loginEmail" name="email" required>
                        </div>
                        <div class="mb-3">
                            <label for="loginPassword" class="form-label">Password</label>
                            <input type="password" class="form-control" id="loginPassword" name="password" required>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="rememberMe" name="rememberMe">
                            <label class="form-check-label" for="rememberMe">Remember me</label>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-custom btn-primary-custom">
                                <i class="fas fa-sign-in-alt me-2"></i>Login
                            </button>
                        </div>
                        <div class="text-center mt-3">
                            <a href="#" class="text-muted">Forgot your password?</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Join Modal -->
    <div class="modal fade modal-custom" id="joinModal" tabindex="-1" aria-labelledby="joinModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="joinModalLabel">Join Rotaract Club</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <form id="joinForm">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="joinFirstName" class="form-label">First Name *</label>
                                <input type="text" class="form-control" id="joinFirstName" name="firstName" required>
                            </div>
                            <div class="col-md-6">
                                <label for="joinLastName" class="form-label">Last Name *</label>
                                <input type="text" class="form-control" id="joinLastName" name="lastName" required>
                            </div>
                            <div class="col-md-6">
                                <label for="joinEmail" class="form-label">Email Address *</label>
                                <input type="email" class="form-control" id="joinEmail" name="email" required>
                            </div>
                            <div class="col-md-6">
                                <label for="joinPhone" class="form-label">Phone Number *</label>
                                <input type="tel" class="form-control" id="joinPhone" name="phone" required>
                            </div>
                            <div class="col-12">
                                <label for="joinInterests" class="form-label">Areas of Interest</label>
                                <textarea class="form-control" id="joinInterests" name="interests" rows="3" 
                                         placeholder="Tell us about your interests and how you'd like to contribute..."></textarea>
                            </div>
                            <div class="col-12">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="agreeTerms" name="agreeTerms" required>
                                    <label class="form-check-label" for="agreeTerms">
                                        I agree to the <a href="#" class="text-primary">Terms and Conditions</a>
                                    </label>
                                </div>
                            </div>
                            <div class="col-12 text-center">
                                <button type="submit" class="btn btn-custom btn-primary-custom btn-lg">
                                    <i class="fas fa-user-plus me-2"></i>Submit Application
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Event Details Modal -->
    <div class="modal fade modal-custom" id="eventModal" tabindex="-1" aria-labelledby="eventModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="eventModalLabel">Event Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4" id="eventModalBody">
                    <!-- Event details will be loaded dynamically -->
                </div>
            </div>
        </div>
    </div>

    <!-- Initiative Details Modal -->
    <div class="modal fade modal-custom" id="initiativeModal" tabindex="-1" aria-labelledby="initiativeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="initiativeModalLabel">Initiative Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4" id="initiativeModalBody">
                    <!-- Initiative details will be loaded dynamically -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-custom btn-primary-custom" onclick="openJoinModal()">Join This Initiative</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Image Modal for Gallery -->
    <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content bg-transparent border-0">
                <div class="modal-header border-0">
                    <h5 class="modal-title text-white" id="imageModalLabel">Image Title</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-0">
                    <img id="modalImage" src="" alt="" class="img-fluid w-100 rounded">
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Global Variables
        let currentUserRole = null;
        const API_BASE_URL = '/api';

        // Initialize page when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            hideLoadingOverlay();
            initializeAnimations();
            initializeEventListeners();
            highlightCurrentPage();
            initializeSmoothScrolling();
            initializeGalleryFilter();
            
            // Initialize all global functions immediately
            initializeGlobalFunctions();
        });

        // Initialize all global functions to ensure they're available
        function initializeGlobalFunctions() {
            console.log('Initializing global functions...');
            
            // Ensure openUserPortal is available
            if (typeof window.openUserPortal !== 'function') {
                window.openUserPortal = function() {
                    console.log('openUserPortal called');
                    const userData = JSON.parse(localStorage.getItem('rotaractUser') || '{}');
                    
                    if (!userData.email) {
                        showAlert('error', 'Please login to access your portal.');
                        return;
                    }
                    
                    console.log('Opening portal for user:', userData);
                    
                    // Try different portal functions
                    if (typeof createEnhancedPortalModal === 'function') {
                        console.log('Using enhanced portal modal');
                        const portalModal = createEnhancedPortalModal(userData.role, userData);
                        document.body.appendChild(portalModal);
                        const modal = new bootstrap.Modal(portalModal);
                        modal.show();
                        portalModal.addEventListener('hidden.bs.modal', function() {
                            document.body.removeChild(portalModal);
                        });
                    } else if (typeof openMemberPortal === 'function') {
                        console.log('Using basic member portal');
                        openMemberPortal(userData.role, userData);
                    } else {
                        console.log('Creating basic portal modal');
                        createBasicPortalModal(userData);
                    }
                };
            }
            
            // Ensure showUserProfile is available
            if (typeof window.showUserProfile !== 'function') {
                window.showUserProfile = function() {
                    console.log('showUserProfile called');
                    const userData = JSON.parse(localStorage.getItem('rotaractUser') || '{}');
                    
                    if (!userData.email) {
                        showAlert('error', 'Please login to view your profile.');
                        return;
                    }
                    
                    console.log('Creating profile modal for:', userData);
                    createUserProfileModal(userData);
                };
            }
            
            // Ensure logoutUser is available
            if (typeof window.logoutUser !== 'function') {
                window.logoutUser = function() {
                    console.log('logoutUser called');
                    
                    const userData = JSON.parse(localStorage.getItem('rotaractUser') || '{}');
                    localStorage.removeItem('rotaractUser');
                    
                    // Close all modals
                    document.querySelectorAll('.modal').forEach(modal => {
                        const modalInstance = bootstrap.Modal.getInstance(modal);
                        if (modalInstance) {
                            modalInstance.hide();
                        }
                    });
                    
                    // Reset navbar
                    const loginDropdown = document.getElementById('loginDropdown');
                    const dropdownMenu = document.getElementById('loginDropdownMenu');
                    
                    if (loginDropdown) {
                        loginDropdown.innerHTML = '<i class="fas fa-sign-in-alt me-1"></i>Login';
                    }
                    
                    if (dropdownMenu) {
                        dropdownMenu.innerHTML = '';
                        dropdownMenu.style.display = 'none';
                        dropdownMenu.classList.remove('show');
                    }
                    
                    showAlert('success', `Goodbye ${userData.firstName || 'User'}! You have been logged out successfully.`);
                    
                    setTimeout(() => {
                        if (typeof scrollToSection === 'function') {
                            scrollToSection('home');
                        }
                    }, 1000);
                };
            }
            
            console.log('Global functions initialized:');
            console.log('- openUserPortal:', typeof window.openUserPortal === 'function');
            console.log('- showUserProfile:', typeof window.showUserProfile === 'function');
            console.log('- logoutUser:', typeof window.logoutUser === 'function');
        }

        // Create basic portal modal as fallback
        function createBasicPortalModal(userData) {
            const portalModal = document.createElement('div');
            portalModal.className = 'modal fade';
            portalModal.innerHTML = `
                <div class="modal-dialog modal-xl">
                    <div class="modal-content">
                        <div class="modal-header" style="background: var(--rotaract-blue); color: white;">
                            <h5 class="modal-title">
                                <i class="fas fa-tachometer-alt me-2"></i>${userData.role.toUpperCase()} Portal
                            </h5>
                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body p-4">
                            <div class="alert alert-info">
                                <h4>Welcome, ${userData.firstName} ${userData.lastName}!</h4>
                                <p>Your ${userData.role} portal is loading...</p>
                                <div class="row mt-4">
                                    <div class="col-md-4">
                                        <div class="card text-center">
                                            <div class="card-body">
                                                <i class="fas fa-user fa-2x text-primary mb-2"></i>
                                                <h6>Profile</h6>
                                                <button class="btn btn-primary btn-sm" onclick="window.showUserProfile()">View Profile</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="card text-center">
                                            <div class="card-body">
                                                <i class="fas fa-calendar fa-2x text-success mb-2"></i>
                                                <h6>Events</h6>
                                                <button class="btn btn-success btn-sm">View Events</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="card text-center">
                                            <div class="card-body">
                                                <i class="fas fa-chart-bar fa-2x text-warning mb-2"></i>
                                                <h6>Analytics</h6>
                                                <button class="btn btn-warning btn-sm">View Stats</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-danger" onclick="window.logoutUser()">Logout</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(portalModal);
            const modal = new bootstrap.Modal(portalModal);
            modal.show();
            
            portalModal.addEventListener('hidden.bs.modal', function() {
                document.body.removeChild(portalModal);
            });
        }

        // Create user profile modal
        function createUserProfileModal(userData) {
            const profileModal = document.createElement('div');
            profileModal.className = 'modal fade';
            profileModal.innerHTML = `
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header" style="background: var(--rotaract-blue); color: white;">
                            <h5 class="modal-title">
                                <i class="fas fa-user-circle me-2"></i>My Profile
                            </h5>
                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body p-4">
                            <div class="row">
                                <div class="col-md-4 text-center">
                                    <i class="fas fa-user-circle fa-5x text-primary mb-3"></i>
                                    <h5>${userData.firstName} ${userData.lastName}</h5>
                                    <span class="badge bg-primary">${userData.role.toUpperCase()}</span>
                                </div>
                                <div class="col-md-8">
                                    <h6>Profile Information</h6>
                                    <table class="table table-borderless">
                                        <tr>
                                            <td><strong>Email:</strong></td>
                                            <td>${userData.email}</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Member ID:</strong></td>
                                            <td>${userData.membershipId || 'N/A'}</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Role:</strong></td>
                                            <td>${userData.role}</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Status:</strong></td>
                                            <td><span class="badge bg-success">${userData.status || 'Active'}</span></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Last Login:</strong></td>
                                            <td>${new Date(userData.loginTime).toLocaleString()}</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary" onclick="window.openUserPortal()">Go to Portal</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(profileModal);
            const modal = new bootstrap.Modal(profileModal);
            modal.show();
            
            profileModal.addEventListener('hidden.bs.modal', function() {
                document.body.removeChild(profileModal);
            });
        }

        // Hide loading overlay
        function hideLoadingOverlay() {
            setTimeout(() => {
                const loadingOverlay = document.getElementById('loadingOverlay');
                if (loadingOverlay) {
                    loadingOverlay.style.opacity = '0';
                    setTimeout(() => {
                        loadingOverlay.style.display = 'none';
                    }, 500);
                }
            }, 1000);
        }

        // Initialize animations
        function initializeAnimations() {
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-fadeInUp');
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.animate-fadeInUp, .animate-slideInLeft, .animate-slideInRight').forEach(el => {
                observer.observe(el);
            });
        }

        // Initialize event listeners
        function initializeEventListeners() {
            window.addEventListener('scroll', handleNavbarScroll);
            
            const contactForm = document.getElementById('contactForm');
            if (contactForm) {
                contactForm.addEventListener('submit', handleContactForm);
            }
            
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', handleLoginForm);
            }
            
            const joinForm = document.getElementById('joinForm');
            if (joinForm) {
                joinForm.addEventListener('submit', handleJoinForm);
            }

            const loadMoreBtn = document.getElementById('loadMoreGallery');
            if (loadMoreBtn) {
                loadMoreBtn.addEventListener('click', function() {
                    this.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Loading...';
                    setTimeout(() => {
                        this.innerHTML = '<i class="fas fa-plus me-2"></i>Load More Photos';
                        showAlert('info', 'More photos loaded successfully!');
                    }, 1500);
                });
            }

            // Fix dropdown functionality
            initializeDropdownFunctionality();
        }

        // Initialize dropdown functionality
        function initializeDropdownFunctionality() {
            const dropdownToggle = document.getElementById('loginDropdown');
            const dropdownMenu = document.getElementById('loginDropdownMenu');
            
            if (dropdownToggle && dropdownMenu) {
                // Handle dropdown toggle click
                dropdownToggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Login dropdown clicked');
                    
                    // Check if user is logged in
                    const userData = JSON.parse(localStorage.getItem('rotaractUser') || '{}');
                    
                    if (userData.email) {
                        // User is logged in - show logged-in options
                        populateLoggedInDropdown(dropdownMenu, userData);
                    } else {
                        // User is not logged in - show login options
                        populateLoginDropdown(dropdownMenu);
                    }
                    
                    // Toggle dropdown visibility
                    toggleDropdownMenu(dropdownMenu);
                });

                // Close dropdown when clicking outside
                document.addEventListener('click', function(e) {
                    if (!dropdownToggle.contains(e.target) && !dropdownMenu.contains(e.target)) {
                        hideDropdownMenu(dropdownMenu);
                    }
                });

                // Handle escape key
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape') {
                        hideDropdownMenu(dropdownMenu);
                    }
                });
            }

            // Alternative: Add direct click handlers to any existing login links
            addDirectLoginHandlers();
        }

        // Populate dropdown with login options
        function populateLoginDropdown(dropdownMenu) {
            dropdownMenu.innerHTML = `
                <li>
                    <h6 class="dropdown-header">
                        <i class="fas fa-sign-in-alt me-2"></i>Choose Login Type
                    </h6>
                </li>
                <li>
                    <a class="dropdown-item" href="#" data-role="member">
                        <i class="fas fa-user text-primary"></i>
                        <div class="ms-3">
                            <div class="fw-bold">Member Login</div>
                            <small class="text-muted">Access member dashboard and activities</small>
                        </div>
                    </a>
                </li>
                <li>
                    <a class="dropdown-item" href="#" data-role="bod">
                        <i class="fas fa-user-tie text-success"></i>
                        <div class="ms-3">
                            <div class="fw-bold">Board of Directors</div>
                            <small class="text-muted">Administrative functions and management</small>
                        </div>
                    </a>
                </li>
                <li>
                    <a class="dropdown-item" href="#" data-role="core">
                        <i class="fas fa-users-cog text-warning"></i>
                        <div class="ms-3">
                            <div class="fw-bold">Core Team</div>
                            <small class="text-muted">Team coordination and event management</small>
                        </div>
                    </a>
                </li>
                <li><hr class="dropdown-divider"></li>
                <li>
                    <a class="dropdown-item text-success" href="#" data-action="join">
                        <i class="fas fa-user-plus text-success"></i>
                        <div class="ms-3">
                            <div class="fw-bold">Join Our Club</div>
                            <small class="text-muted">Become a member of Rotaract</small>
                        </div>
                    </a>
                </li>
            `;
            
            // Add event listeners to the new dropdown items
            setTimeout(() => {
                addLoginDropdownListeners(dropdownMenu);
            }, 50);
        }

        // Populate dropdown with logged-in user options
        function populateLoggedInDropdown(dropdownMenu, userData) {
            dropdownMenu.innerHTML = `
                <li>
                    <h6 class="dropdown-header">
                        <i class="fas fa-user-circle me-2"></i>Welcome, ${userData.firstName}!
                    </h6>
                </li>
                <li>
                    <a class="dropdown-item" href="#" id="portalLink">
                        <i class="fas fa-tachometer-alt text-primary"></i>
                        <div class="ms-3">
                            <div class="fw-bold">My Portal</div>
                            <small class="text-muted">Access your ${userData.role} dashboard</small>
                        </div>
                    </a>
                </li>
                <li>
                    <a class="dropdown-item" href="#" id="profileLink">
                        <i class="fas fa-user text-info"></i>
                        <div class="ms-3">
                            <div class="fw-bold">My Profile</div>
                            <small class="text-muted">View and edit your profile</small>
                        </div>
                    </a>
                </li>
                <li><hr class="dropdown-divider"></li>
                <li>
                    <a class="dropdown-item text-danger" href="#" id="logoutLink">
                        <i class="fas fa-sign-out-alt text-danger"></i>
                        <div class="ms-3">
                            <div class="fw-bold">Logout</div>
                            <small class="text-muted">Sign out of your account</small>
                        </div>
                    </a>
                </li>
            `;
            
            // Add direct event listeners with immediate binding
            setTimeout(() => {
                const portalLink = dropdownMenu.querySelector('#portalLink');
                const profileLink = dropdownMenu.querySelector('#profileLink');
                const logoutLink = dropdownMenu.querySelector('#logoutLink');
                
                if (portalLink) {
                    portalLink.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log('Portal link clicked directly');
                        hideDropdownMenu(dropdownMenu);
                        
                        // Call function directly
                        setTimeout(() => {
                            if (typeof window.openUserPortal === 'function') {
                                window.openUserPortal();
                            } else {
                                console.error('openUserPortal not available');
                                showAlert('error', 'Portal function not available');
                            }
                        }, 100);
                    });
                }
                
                if (profileLink) {
                    profileLink.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log('Profile link clicked directly');
                        hideDropdownMenu(dropdownMenu);
                        
                        // Call function directly
                        setTimeout(() => {
                            if (typeof window.showUserProfile === 'function') {
                                window.showUserProfile();
                            } else {
                                console.error('showUserProfile not available');
                                showAlert('error', 'Profile function not available');
                            }
                        }, 100);
                    });
                }
                
                if (logoutLink) {
                    logoutLink.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log('Logout link clicked directly');
                        hideDropdownMenu(dropdownMenu);
                        
                        // Call function directly
                        setTimeout(() => {
                            if (typeof window.logoutUser === 'function') {
                                window.logoutUser();
                            } else {
                                console.error('logoutUser not available');
                                showAlert('error', 'Logout function not available');
                            }
                        }, 100);
                    });
                }
                
                console.log('Direct event listeners attached to dropdown items');
            }, 100);
        }

        // Add event listeners for login dropdown items
        function addLoginDropdownListeners(dropdownMenu) {
            const dropdownItems = dropdownMenu.querySelectorAll('.dropdown-item');
            
            dropdownItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const role = this.getAttribute('data-role');
                    const action = this.getAttribute('data-action');
                    
                    // Hide dropdown
                    hideDropdownMenu(dropdownMenu);
                    
                    if (role) {
                        console.log(`${role} login clicked`);
                        window.openLoginModal(role);
                    } else if (action === 'join') {
                        console.log('Join us clicked');
                        window.openJoinModal();
                    }
                });
            });
        }

        // Add event listeners for logged-in dropdown items
        function addLoggedInDropdownListeners(dropdownMenu) {
            const dropdownItems = dropdownMenu.querySelectorAll('.dropdown-item');
            
            dropdownItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const action = this.getAttribute('data-action');
                    console.log('Logged-in dropdown action:', action);
                    
                    // Hide dropdown
                    hideDropdownMenu(dropdownMenu);
                    
                    if (action === 'portal') {
                        console.log('My Portal clicked');
                        if (typeof window.openUserPortal === 'function') {
                            window.openUserPortal();
                        } else {
                            console.error('openUserPortal function not found');
                            showAlert('error', 'Portal function not available. Please refresh the page.');
                        }
                    } else if (action === 'profile') {
                        console.log('My Profile clicked');
                        if (typeof window.showUserProfile === 'function') {
                            window.showUserProfile();
                        } else {
                            console.error('showUserProfile function not found');
                            showAlert('error', 'Profile function not available. Please refresh the page.');
                        }
                    } else if (action === 'logout') {
                        console.log('Logout clicked');
                        if (typeof window.logoutUser === 'function') {
                            window.logoutUser();
                        } else {
                            console.error('logoutUser function not found');
                            showAlert('error', 'Logout function not available. Please refresh the page.');
                        }
                    }
                });
            });
        }

        // Toggle dropdown menu visibility
        function toggleDropdownMenu(dropdownMenu) {
            if (dropdownMenu.style.display === 'none' || !dropdownMenu.style.display) {
                showDropdownMenu(dropdownMenu);
            } else {
                hideDropdownMenu(dropdownMenu);
            }
        }

        // Show dropdown menu
        function showDropdownMenu(dropdownMenu) {
            dropdownMenu.style.display = 'block';
            dropdownMenu.classList.add('show');
            
            // Update toggle button state
            const dropdownToggle = document.getElementById('loginDropdown');
            if (dropdownToggle) {
                dropdownToggle.setAttribute('aria-expanded', 'true');
                dropdownToggle.classList.add('show');
            }
        }

        // Hide dropdown menu
        function hideDropdownMenu(dropdownMenu) {
            dropdownMenu.style.display = 'none';
            dropdownMenu.classList.remove('show');
            
            // Update toggle button state
            const dropdownToggle = document.getElementById('loginDropdown');
            if (dropdownToggle) {
                dropdownToggle.setAttribute('aria-expanded', 'false');
                dropdownToggle.classList.remove('show');
            }
        }

        // Add direct click handlers as backup
        function addDirectLoginHandlers() {
            // Member login handler
            const memberLoginLinks = document.querySelectorAll('a[onclick*="openLoginModal(\'member\')"]');
            memberLoginLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('Member login clicked directly');
                    openLoginModal('member');
                });
            });

            // BOD login handler
            const bodLoginLinks = document.querySelectorAll('a[onclick*="openLoginModal(\'bod\')"]');
            bodLoginLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('BOD login clicked directly');
                    openLoginModal('bod');
                });
            });

            // Core team login handler
            const coreLoginLinks = document.querySelectorAll('a[onclick*="openLoginModal(\'core\')"]');
            coreLoginLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('Core team login clicked directly');
                    openLoginModal('core');
                });
            });

            // Join us handler
            const joinLinks = document.querySelectorAll('a[onclick*="openJoinModal()"]');
            joinLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('Join us clicked directly');
                    openJoinModal();
                });
            });
        }

        // Navbar scroll handler
        function handleNavbarScroll() {
            const navbar = document.getElementById('mainNavbar');
            if (navbar) {
                if (window.scrollY > 50) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
            }
        }

        // Highlight current page in navigation
        function highlightCurrentPage() {
            const currentHash = window.location.hash || '#home';
            const navLinks = document.querySelectorAll('.navbar-nav .nav-link');
            
            navLinks.forEach(link => {
                if (link.getAttribute('href') === currentHash) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });
        }

        // Initialize smooth scrolling
        function initializeSmoothScrolling() {
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        const offsetTop = target.offsetTop - 90; // Adjusted for new navbar height
                        window.scrollTo({
                            top: offsetTop,
                            behavior: 'smooth'
                        });
                        
                        // Update active nav link
                        document.querySelectorAll('.navbar-nav .nav-link').forEach(link => {
                            link.classList.remove('active');
                        });
                        this.classList.add('active');
                        
                        // Only close mobile menu after user interaction, not automatically
                        const navbarCollapse = document.querySelector('.navbar-collapse');
                        if (navbarCollapse.classList.contains('show') && window.innerWidth < 992) {
                            // Give user time to see their selection before closing
                            setTimeout(() => {
                                bootstrap.Collapse.getInstance(navbarCollapse)?.hide();
                                document.body.classList.remove('mobile-menu-open');
                            }, 800); // Increased delay
                        }
                    }
                });
            });

            // Enhanced mobile menu handling
            const navbarToggler = document.querySelector('.navbar-toggler');
            const navbarCollapse = document.querySelector('.navbar-collapse');
            
            if (navbarToggler && navbarCollapse) {
                // Handle navbar toggler click
                navbarToggler.addEventListener('click', function() {
                    setTimeout(() => {
                        if (navbarCollapse.classList.contains('show')) {
                            document.body.classList.add('mobile-menu-open');
                        } else {
                            document.body.classList.remove('mobile-menu-open');
                        }
                    }, 150);
                });

                // Handle dropdown clicks in mobile menu - close after selection
                const dropdownItems = document.querySelectorAll('.dropdown-item');
                dropdownItems.forEach(item => {
                    item.addEventListener('click', function() {
                        if (navbarCollapse.classList.contains('show') && window.innerWidth < 992) {
                            setTimeout(() => {
                                bootstrap.Collapse.getInstance(navbarCollapse)?.hide();
                                document.body.classList.remove('mobile-menu-open');
                            }, 600); // Increased delay for dropdown items
                        }
                    });
                });

                // Close mobile menu when clicking outside (only on mobile)
                document.addEventListener('click', function(e) {
                    if (window.innerWidth < 992 && 
                        navbarCollapse.classList.contains('show') && 
                        !navbarCollapse.contains(e.target) && 
                        !navbarToggler.contains(e.target)) {
                        bootstrap.Collapse.getInstance(navbarCollapse)?.hide();
                        document.body.classList.remove('mobile-menu-open');
                    }
                });

                // Handle escape key to close mobile menu
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape' && navbarCollapse.classList.contains('show')) {
                        bootstrap.Collapse.getInstance(navbarCollapse)?.hide();
                        document.body.classList.remove('mobile-menu-open');
                    }
                });

                // Prevent menu from closing on dropdown toggle
                const dropdownToggle = document.querySelector('#loginDropdown');
                if (dropdownToggle) {
                    dropdownToggle.addEventListener('click', function(e) {
                        // Don't close the mobile menu when opening dropdown
                        e.stopPropagation();
                    });
                }
            }
        }

        // Initialize gallery filter
        function initializeGalleryFilter() {
            const filterButtons = document.querySelectorAll('.gallery-filter .btn');
            const galleryItems = document.querySelectorAll('.gallery-item');
            
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const filter = this.getAttribute('data-filter');
                    
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    galleryItems.forEach(item => {
                        const category = item.getAttribute('data-category');
                        
                        if (filter === 'all' || category === filter) {
                            item.classList.remove('hidden');
                            item.style.display = 'block';
                        } else {
                            item.classList.add('hidden');
                            setTimeout(() => {
                                if (item.classList.contains('hidden')) {
                                    item.style.display = 'none';
                                }
                            }, 300);
                        }
                    });
                });
            });
        }

        // Global functions to ensure they're accessible
        window.openLoginModal = function(role) {
            console.log('Opening login modal for role:', role); // Debug log
            
            currentUserRole = role;
            const modal = new bootstrap.Modal(document.getElementById('loginModal'));
            const modalTitle = document.getElementById('loginModalLabel');
            const modalBody = document.querySelector('#loginModal .modal-body');
            
            // Role-specific titles and styling
            const roleConfig = {
                'member': {
                    title: 'Member Login Portal',
                    icon: 'fas fa-user',
                    color: 'primary',
                    description: 'Access your member dashboard and club activities'
                },
                'bod': {
                    title: 'Board of Directors Login',
                    icon: 'fas fa-user-tie',
                    color: 'success',
                    description: 'Access administrative functions and club management'
                },
                'core': {
                    title: 'Core Team Login Portal',
                    icon: 'fas fa-users-cog',
                    color: 'warning',
                    description: 'Access team coordination and event management tools'
                }
            };
            
            const config = roleConfig[role] || roleConfig.member;
            
            // Update modal title with role-specific styling
            modalTitle.innerHTML = `
                <i class="${config.icon} me-2"></i>${config.title}
            `;
            
            // Update modal header color
            const modalHeader = document.querySelector('#loginModal .modal-header');
            modalHeader.style.background = `var(--rotaract-${config.color === 'primary' ? 'blue' : config.color === 'success' ? 'blue' : 'gold'})`;
            modalHeader.style.color = 'white';
            
            // Create role-specific login form
            modalBody.innerHTML = createRoleSpecificLoginForm(role, config);
            
            // Show the modal
            modal.show();
            
            // Add event listener for the new form
            setTimeout(() => {
                const newLoginForm = document.getElementById('roleLoginForm');
                if (newLoginForm) {
                    newLoginForm.addEventListener('submit', handleRoleBasedLogin);
                }
            }, 100);
        };

        // Make openJoinModal globally accessible
        window.openJoinModal = function() {
            console.log('Opening join modal'); // Debug log
            const modal = new bootstrap.Modal(document.getElementById('joinModal'));
            modal.show();
        };

        // Test function to verify dropdown functionality
        window.testDropdown = function() {
            console.log('Testing dropdown functionality...');
            
            // Test member login
            console.log('Testing member login...');
            openLoginModal('member');
            
            setTimeout(() => {
                bootstrap.Modal.getInstance(document.getElementById('loginModal'))?.hide();
                
                // Test BOD login
                console.log('Testing BOD login...');
                openLoginModal('bod');
                
                setTimeout(() => {
                    bootstrap.Modal.getInstance(document.getElementById('loginModal'))?.hide();
                    
                    // Test Core login
                    console.log('Testing Core login...');
                    openLoginModal('core');
                    
                    setTimeout(() => {
                        bootstrap.Modal.getInstance(document.getElementById('loginModal'))?.hide();
                        console.log('All login modals tested successfully!');
                    }, 1000);
                }, 1000);
            }, 1000);
        };

        // Create role-specific login form
        function createRoleSpecificLoginForm(role, config) {
            return `
                <div class="p-4">
                    <!-- Role Description -->
                    <div class="alert alert-${config.color} bg-light border-0 mb-4">
                        <div class="d-flex align-items-center">
                            <i class="${config.icon} fa-2x me-3 text-${config.color}"></i>
                            <div>
                                <h6 class="mb-1 text-${config.color}">${config.title}</h6>
                                <small class="text-muted">${config.description}</small>
                            </div>
                        </div>
                    </div>

                    <!-- Demo Credentials for Testing -->
                    <div class="alert alert-info mb-4">
                        <h6 class="fw-bold mb-2">
                            <i class="fas fa-key me-2"></i>Demo Login Credentials
                        </h6>
                        <div class="row g-2 small">
                            ${getDemoCredentialsHTML(role)}
                        </div>
                        <small class="text-muted d-block mt-2">
                            <i class="fas fa-info-circle me-1"></i>
                            Use these credentials to test the ${role} portal functionality
                        </small>
                    </div>
                    
                    <!-- Login Form -->
                    <form id="roleLoginForm" data-role="${role}">
                        <div class="mb-3">
                            <label for="roleLoginEmail" class="form-label">
                                <i class="fas fa-envelope me-2 text-${config.color}"></i>Email Address
                            </label>
                            <input type="email" class="form-control form-control-lg" id="roleLoginEmail" 
                                   name="email" required placeholder="Enter your ${role} email">
                        </div>
                        
                        <div class="mb-3">
                            <label for="roleLoginPassword" class="form-label">
                                <i class="fas fa-lock me-2 text-${config.color}"></i>Password
                            </label>
                            <div class="input-group">
                                <input type="password" class="form-control form-control-lg" id="roleLoginPassword" 
                                       name="password" required placeholder="Enter your password">
                                <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility('roleLoginPassword')">
                                    <i class="fas fa-eye" id="passwordToggleIcon"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="roleRememberMe" name="rememberMe">
                            <label class="form-check-label" for="roleRememberMe">
                                Remember me on this device
                            </label>
                        </div>
                        
                        <div class="d-grid mb-3">
                            <button type="submit" class="btn btn-${config.color} btn-lg">
                                <i class="fas fa-sign-in-alt me-2"></i>Login to ${config.title}
                            </button>
                        </div>
                        
                        <div class="text-center">
                            <a href="#" class="text-muted me-3" onclick="showForgotPassword('${role}')">
                                <i class="fas fa-question-circle me-1"></i>Forgot Password?
                            </a>
                            <a href="#" class="text-${config.color}" onclick="showRoleInfo('${role}')">
                                <i class="fas fa-info-circle me-1"></i>Role Information
                            </a>
                        </div>
                    </form>
                </div>
            `;
        }

        // Get demo credentials HTML for each role
        function getDemoCredentialsHTML(role) {
            const credentials = {
                member: [
                    { email: 'member@rotaract.org', password: 'member123' },
                    { email: 'john.doe@email.com', password: 'password' },
                    { email: 'jane.smith@email.com', password: 'password' }
                ],
                bod: [
                    { email: 'president@rotaract.org', password: 'bod123' },
                    { email: 'secretary@rotaract.org', password: 'bod123' },
                    { email: 'treasurer@rotaract.org', password: 'bod123' }
                ],
                core: [
                    { email: 'core@rotaract.org', password: 'core123' },
                    { email: 'coordinator@rotaract.org', password: 'core123' },
                    { email: 'manager@rotaract.org', password: 'core123' }
                ]
            };

            return credentials[role].map(cred => `
                <div class="col-md-4 mb-2">
                    <div class="p-2 bg-white rounded border">
                        <strong class="d-block">${cred.email}</strong>
                        <code class="small">${cred.password}</code>
                        <button class="btn btn-sm btn-outline-primary ms-2" onclick="fillLoginForm('${cred.email}', '${cred.password}')" title="Auto-fill">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Auto-fill login form
        function fillLoginForm(email, password) {
            document.getElementById('roleLoginEmail').value = email;
            document.getElementById('roleLoginPassword').value = password;
            showAlert('info', 'Login credentials filled automatically. Click login to proceed.');
        }

        // Toggle password visibility
        function togglePasswordVisibility(inputId) {
            const passwordInput = document.getElementById(inputId);
            const toggleIcon = document.getElementById('passwordToggleIcon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.className = 'fas fa-eye-slash';
            } else {
                passwordInput.type = 'password';
                toggleIcon.className = 'fas fa-eye';
            }
        }

        // Enhanced role-based login handler
        async function handleRoleBasedLogin(e) {
            e.preventDefault();
            const form = e.target;
            const role = form.getAttribute('data-role');
            const submitButton = form.querySelector('button[type="submit"]');
            const originalText = submitButton.innerHTML;
            
            // Show loading state
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Authenticating...';
            submitButton.disabled = true;
            
            const formData = new FormData(form);
            const data = Object.fromEntries(formData);
            
            try {
                // Simulate API authentication delay
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Enhanced authentication with role-specific validation
                if (data.email && data.password) {
                    const isValidLogin = validateRoleCredentials(data.email, data.password, role);
                    
                    if (isValidLogin) {
                        const userData = createRoleUserSession(data.email, role);
                        
                        // Store user session with role-specific data
                        localStorage.setItem('rotaractUser', JSON.stringify(userData));
                        
                        // Show success message with role-specific content
                        showAlert('success', `Welcome ${userData.firstName}! Successfully logged into ${role.toUpperCase()} portal. Redirecting to your dashboard...`);
                        
                        // Close login modal
                        bootstrap.Modal.getInstance(document.getElementById('loginModal')).hide();
                        
                        // Clear form
                        form.reset();
                        
                        // Update navbar for logged-in user
                        updateNavbarForLoggedInUser(userData);
                        
                        // Redirect to role-specific portal
                        setTimeout(() => {
                            openRoleSpecificPortal(role, userData);
                        }, 1500);
                    } else {
                        throw new Error(`Invalid ${role} credentials. Please check your email and password or contact your administrator.`);
                    }
                } else {
                    throw new Error('Please enter both email and password.');
                }
                
            } catch (error) {
                showAlert('error', error.message || 'Login failed. Please try again.');
            } finally {
                // Restore button state
                submitButton.innerHTML = originalText;
                submitButton.disabled = false;
            }
        }

        // Enhanced credential validation with role-specific checks
        function validateRoleCredentials(email, password, role) {
            const roleCredentials = {
                member: [
                    { email: 'member@rotaract.org', password: 'member123', name: 'John Member', id: 'M001' },
                    { email: 'john.doe@email.com', password: 'password', name: 'John Doe', id: 'M002' },
                    { email: 'jane.smith@email.com', password: 'password', name: 'Jane Smith', id: 'M003' },
                    { email: 'alex.wilson@email.com', password: 'member123', name: 'Alex Wilson', id: 'M004' },
                    { email: 'sarah.johnson@email.com', password: 'member123', name: 'Sarah Johnson', id: 'M005' }
                ],
                bod: [
                    { email: 'president@rotaract.org', password: 'bod123', name: 'President Smith', id: 'BOD001', position: 'Club President' },
                    { email: 'secretary@rotaract.org', password: 'bod123', name: 'Secretary Jones', id: 'BOD002', position: 'Club Secretary' },
                    { email: 'treasurer@rotaract.org', password: 'bod123', name: 'Treasurer Brown', id: 'BOD003', position: 'Club Treasurer' },
                    { email: 'vp@rotaract.org', password: 'bod123', name: 'VP Davis', id: 'BOD004', position: 'Vice President' }
                ],
                core: [
                    { email: 'core@rotaract.org', password: 'core123', name: 'Core Leader', id: 'CT001', department: 'Event Coordination' },
                    { email: 'coordinator@rotaract.org', password: 'core123', name: 'Event Coordinator', id: 'CT002', department: 'Event Management' },
                    { email: 'manager@rotaract.org', password: 'core123', name: 'Project Manager', id: 'CT003', department: 'Project Management' },
                    { email: 'communications@rotaract.org', password: 'core123', name: 'Communications Lead', id: 'CT004', department: 'Communications' }
                ]
            };

            const credentials = roleCredentials[role] || [];
            return credentials.find(cred => 
                cred.email.toLowerCase() === email.toLowerCase() && 
                cred.password === password
            );
        }

        // Create enhanced user session with role-specific data
        function createRoleUserSession(email, role) {
            const userCredential = validateRoleCredentials(email, 'dummy', role);
            const actualUser = validateRoleCredentials(email, document.getElementById('roleLoginPassword').value, role);
            
            const baseUserData = {
                email: email,
                role: role,
                loginTime: new Date().toISOString(),
                sessionId: generateSessionId(),
                lastActivity: new Date().toISOString()
            };

            // Enhanced role-specific user data
            const roleSpecificData = {
                member: {
                    firstName: actualUser?.name?.split(' ')[0] || getFirstNameFromEmail(email),
                    lastName: actualUser?.name?.split(' ')[1] || 'Member',
                    membershipId: actualUser?.id || 'M' + Math.floor(Math.random() * 1000),
                    joinDate: '2023-01-15',
                    status: 'Active Member',
                    eventsAttended: Math.floor(Math.random() * 20) + 5,
                    hoursVolunteered: Math.floor(Math.random() * 100) + 20,
                    projectsJoined: Math.floor(Math.random() * 10) + 3,
                    membershipLevel: 'Regular',
                    committees: ['Community Service', 'Fundraising']
                },
                bod: {
                    firstName: actualUser?.name?.split(' ')[0] || getFirstNameFromEmail(email),
                    lastName: actualUser?.name?.split(' ')[1] || 'Director',
                    position: actualUser?.position || getBODPosition(email),
                    membershipId: actualUser?.id || 'BOD' + Math.floor(Math.random() * 100),
                    joinDate: '2022-07-01',
                    status: 'Board Member',
                    totalMembers: 156,
                    activeProjects: 8,
                    pendingApprovals: Math.floor(Math.random() * 10) + 1,
                    boardTerm: '2024-2025',
                    responsibilities: ['Strategic Planning', 'Member Oversight', 'Financial Management']
                },
                core: {
                    firstName: actualUser?.name?.split(' ')[0] || getFirstNameFromEmail(email),
                    lastName: actualUser?.name?.split(' ')[1] || 'Team Lead',
                    department: actualUser?.department || getCoreTeamDepartment(email),
                    membershipId: actualUser?.id || 'CT' + Math.floor(Math.random() * 100),
                    joinDate: '2022-09-01',
                    status: 'Core Team Member',
                    teamMembers: Math.floor(Math.random() * 15) + 10,
                    ongoingEvents: Math.floor(Math.random() * 8) + 2,
                    tasksAssigned: Math.floor(Math.random() * 20) + 5,
                    teamRole: 'Team Leader',
                    specializations: ['Event Planning', 'Team Coordination', 'Project Management']
                }
            };

            return { ...baseUserData, ...roleSpecificData[role] };
        }

        // Open role-specific portal with enhanced features
        function openRoleSpecificPortal(role, userData) {
            // Create enhanced portal modal
            const portalModal = createEnhancedPortalModal(role, userData);
            document.body.appendChild(portalModal);
            
            const modal = new bootstrap.Modal(portalModal);
            modal.show();
            
            // Remove modal when hidden
            portalModal.addEventListener('hidden.bs.modal', function() {
                document.body.removeChild(portalModal);
            });
            
            // Update last activity
            updateUserActivity(userData);
        }

        // Show forgot password modal
        function showForgotPassword(role) {
            showAlert('info', `Password reset for ${role} accounts will be available soon. Please contact your administrator for assistance.`);
        }

        // Show role information
        function showRoleInfo(role) {
            const roleInfo = {
                member: 'Members have access to event registration, community projects, announcements, and personal dashboard features.',
                bod: 'Board of Directors have administrative access to member management, financial reports, strategic planning, and club oversight.',
                core: 'Core Team members have access to event management, team coordination, project planning, and operational tools.'
            };
            
            showAlert('info', roleInfo[role] || 'Role information not available.');
        }

        // Update user activity timestamp
        function updateUserActivity(userData) {
            userData.lastActivity = new Date().toISOString();
            localStorage.setItem('rotaractUser', JSON.stringify(userData));
        }

        // Scroll to section function
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                const offsetTop = section.offsetTop - 80;
                window.scrollTo({
                    top: offsetTop,
                    behavior: 'smooth'
                });
                
                document.querySelectorAll('.navbar-nav .nav-link').forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === `#${sectionId}`) {
                        link.classList.add('active');
                    }
                });
                
                showAlert('success', `Navigated to ${sectionId.charAt(0).toUpperCase() + sectionId.slice(1)} section`);
            } else {
                showAlert('error', `Section "${sectionId}" not found`);
            }
        }

        // Show event details
        function showEventDetails(eventId) {
            const modal = new bootstrap.Modal(document.getElementById('eventModal'));
            const modalBody = document.getElementById('eventModalBody');
            
            const eventData = {
                1: {
                    title: 'Community Cleanup Drive',
                    date: 'December 15, 2024',
                    time: '9:00 AM - 2:00 PM',
                    location: 'Central Park, Downtown',
                    description: 'Join us for a community-wide cleanup initiative to beautify our local parks and neighborhoods.',
                    requirements: ['Comfortable clothing', 'Closed-toe shoes', 'Water bottle'],
                    contact: 'events@rotaractclub.org'
                },
                2: {
                    title: 'Blood Donation Camp',
                    date: 'December 20, 2024',
                    time: '10:00 AM - 4:00 PM',
                    location: 'Community Center Hall',
                    description: 'Help save lives by participating in our quarterly blood donation drive.',
                    requirements: ['Age 18-65', 'Weight above 50kg', 'Valid ID', 'Good health'],
                    contact: 'health@rotaractclub.org'
                },
                3: {
                    title: 'Youth Leadership Workshop',
                    date: 'January 5, 2025',
                    time: '2:00 PM - 6:00 PM',
                    location: 'Conference Room, City Library',
                    description: 'Develop essential leadership skills through interactive workshops.',
                    requirements: ['Notebook and pen', 'Open mind', 'Enthusiasm to learn'],
                    contact: 'leadership@rotaractclub.org'
                }
            };
            
            const event = eventData[eventId];
            if (event) {
                modalBody.innerHTML = `
                    <div class="row">
                        <div class="col-12">
                            <h4 class="mb-3">${event.title}</h4>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <h6><i class="fas fa-calendar me-2 text-primary"></i>Date</h6>
                                    <p class="text-muted">${event.date}</p>
                                </div>
                                <div class="col-md-6">
                                    <h6><i class="fas fa-clock me-2 text-primary"></i>Time</h6>
                                    <p class="text-muted">${event.time}</p>
                                </div>
                                <div class="col-12">
                                    <h6><i class="fas fa-map-marker-alt me-2 text-primary"></i>Location</h6>
                                    <p class="text-muted">${event.location}</p>
                                </div>
                                <div class="col-12">
                                    <h6><i class="fas fa-info-circle me-2 text-primary"></i>Description</h6>
                                    <p class="text-muted">${event.description}</p>
                                </div>
                                <div class="col-12">
                                    <h6><i class="fas fa-list me-2 text-primary"></i>Requirements</h6>
                                    <ul class="text-muted">
                                        ${event.requirements.map(req => `<li>${req}</li>`).join('')}
                                    </ul>
                                </div>
                                <div class="col-12">
                                    <h6><i class="fas fa-envelope me-2 text-primary"></i>Contact</h6>
                                    <p class="text-muted">${event.contact}</p>
                                </div>
                                <div class="col-12 text-center">
                                    <button class="btn btn-custom btn-primary-custom me-2" onclick="registerForEvent('${eventId}')">
                                        <i class="fas fa-user-plus me-2"></i>Register Now
                                    </button>
                                    <button class="btn btn-outline-secondary" onclick="shareEvent('${eventId}')">
                                        <i class="fas fa-share me-2"></i>Share Event
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                modal.show();
            }
        }

        // Show initiative details
        function showInitiativeDetails(initiativeType) {
            const modal = new bootstrap.Modal(document.getElementById('initiativeModal'));
            const modalTitle = document.getElementById('initiativeModalLabel');
            const modalBody = document.getElementById('initiativeModalBody');
            
            const initiativeData = {
                education: {
                    title: 'Education Support Initiative',
                    icon: 'fas fa-graduation-cap',
                    description: 'Our Education Support Initiative focuses on providing comprehensive educational assistance to underprivileged students.',
                    objectives: [
                        'Provide scholarships to deserving students',
                        'Offer tutoring and mentorship programs',
                        'Distribute educational materials and supplies',
                        'Organize career guidance workshops'
                    ],
                    impact: 'Over 200 students supported with scholarships and educational resources',
                    howToHelp: [
                        'Volunteer as a tutor or mentor',
                        'Donate educational materials',
                        'Sponsor a student\'s education',
                        'Organize fundraising events'
                    ]
                },
                health: {
                    title: 'Health & Wellness Initiative',
                    icon: 'fas fa-heartbeat',
                    description: 'Our Health & Wellness Initiative aims to improve community health through various medical camps and awareness programs.',
                    objectives: [
                        'Organize regular health checkup camps',
                        'Conduct blood donation drives',
                        'Provide health awareness education',
                        'Support medical treatment for the needy'
                    ],
                    impact: 'Conducted 50+ health camps and collected 500+ units of blood',
                    howToHelp: [
                        'Volunteer at health camps',
                        'Donate blood regularly',
                        'Sponsor medical equipment',
                        'Spread health awareness'
                    ]
                },
                environment: {
                    title: 'Environmental Care Initiative',
                    icon: 'fas fa-leaf',
                    description: 'Our Environmental Care Initiative focuses on protecting and preserving our environment through various conservation activities.',
                    objectives: [
                        'Organize tree plantation drives',
                        'Conduct community cleanup campaigns',
                        'Promote sustainable living practices',
                        'Raise environmental awareness'
                    ],
                    impact: 'Planted 1000+ trees and organized 25+ cleanup drives',
                    howToHelp: [
                        'Participate in plantation drives',
                        'Join cleanup campaigns',
                        'Adopt eco-friendly practices',
                        'Educate others about environment'
                    ]
                },
                community: {
                    title: 'Community Outreach Initiative',
                    icon: 'fas fa-hands-helping',
                    description: 'Our Community Outreach Initiative reaches out to vulnerable communities with essential support and services.',
                    objectives: [
                        'Organize food distribution drives',
                        'Provide clothing and essentials',
                        'Support elderly care programs',
                        'Assist disaster relief efforts'
                    ],
                    impact: 'Supported 500+ families with food and essential supplies',
                    howToHelp: [
                        'Donate food and clothing',
                        'Volunteer in distribution drives',
                        'Sponsor relief packages',
                        'Help identify needy families'
                    ]
                },
                skills: {
                    title: 'Skill Development Initiative',
                    icon: 'fas fa-users-cog',
                    description: 'Our Skill Development Initiative focuses on enhancing professional and personal skills of youth in our community.',
                    objectives: [
                        'Conduct professional skill workshops',
                        'Provide career counseling sessions',
                        'Organize leadership training programs',
                        'Facilitate job placement assistance'
                    ],
                    impact: 'Trained 300+ youth in various professional skills',
                    howToHelp: [
                        'Conduct skill workshops',
                        'Provide career mentorship',
                        'Share job opportunities',
                        'Sponsor training programs'
                    ]
                },
                global: {
                    title: 'Global Partnerships Initiative',
                    icon: 'fas fa-globe-americas',
                    description: 'Our Global Partnerships Initiative connects us with international Rotaract clubs for collaborative service projects.',
                    objectives: [
                        'Establish international partnerships',
                        'Organize cultural exchange programs',
                        'Collaborate on global service projects',
                        'Share best practices worldwide'
                    ],
                    impact: 'Partnered with 15+ international clubs across 8 countries',
                    howToHelp: [
                        'Participate in exchange programs',
                        'Share cultural knowledge',
                        'Support international projects',
                        'Build global connections'
                    ]
                }
            };
            
            const initiative = initiativeData[initiativeType];
            if (initiative) {
                modalTitle.textContent = initiative.title;
                modalBody.innerHTML = `
                    <div class="row">
                        <div class="col-12">
                            <div class="text-center mb-4">
                                <i class="${initiative.icon} fa-3x text-primary mb-3"></i>
                                <p class="lead">${initiative.description}</p>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <h6 class="fw-bold text-primary">
                                        <i class="fas fa-bullseye me-2"></i>Our Objectives
                                    </h6>
                                    <ul class="list-unstyled">
                                        ${initiative.objectives.map(obj => `<li class="mb-2"><i class="fas fa-check text-success me-2"></i>${obj}</li>`).join('')}
                                    </ul>
                                </div>
                                
                                <div class="col-md-6 mb-4">
                                    <h6 class="fw-bold text-primary">
                                        <i class="fas fa-hands-helping me-2"></i>How You Can Help
                                    </h6>
                                    <ul class="list-unstyled">
                                        ${initiative.howToHelp.map(help => `<li class="mb-2"><i class="fas fa-heart text-danger me-2"></i>${help}</li>`).join('')}
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="alert alert-info">
                                <h6 class="fw-bold mb-2">
                                    <i class="fas fa-chart-line me-2"></i>Our Impact So Far
                                </h6>
                                <p class="mb-0">${initiative.impact}</p>
                            </div>
                        </div>
                    </div>
                `;
                modal.show();
            }
        }

        // Open image modal
        function openImageModal(imageSrc, imageTitle) {
            const modal = new bootstrap.Modal(document.getElementById('imageModal'));
            const modalImage = document.getElementById('modalImage');
            const modalTitle = document.getElementById('imageModalLabel');
            
            modalImage.src = imageSrc;
            modalImage.alt = imageTitle;
            modalTitle.textContent = imageTitle;
            
            modal.show();
        }

        // Form Handlers
        async function handleContactForm(e) {
            e.preventDefault();
            const submitButton = e.target.querySelector('button[type="submit"]');
            const originalText = submitButton.innerHTML;
            
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Sending...';
            submitButton.disabled = true;
            
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData);
            
            try {
                await new Promise(resolve => setTimeout(resolve, 2000));
                showAlert('success', 'Thank you! Your message has been sent successfully. We\'ll get back to you soon.');
                e.target.reset();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } catch (error) {
                showAlert('error', 'Sorry, there was an error sending your message. Please try again or contact us directly.');
            } finally {
                submitButton.innerHTML = originalText;
                submitButton.disabled = false;
            }
        }

        async function handleJoinForm(e) {
            e.preventDefault();
            const submitButton = e.target.querySelector('button[type="submit"]');
            const originalText = submitButton.innerHTML;
            
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Submitting...';
            submitButton.disabled = true;
            
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData);
            
            if (!data.firstName || !data.lastName || !data.email || !data.phone) {
                showAlert('error', 'Please fill in all required fields.');
                submitButton.innerHTML = originalText;
                submitButton.disabled = false;
                return;
            }
            
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(data.email)) {
                showAlert('error', 'Please enter a valid email address.');
                submitButton.innerHTML = originalText;
                submitButton.disabled = false;
                return;
            }
            
            try {
                await new Promise(resolve => setTimeout(resolve, 2500));
                showAlert('success', 'Application submitted successfully! We\'ll contact you within 2-3 business days with next steps.');
                bootstrap.Modal.getInstance(document.getElementById('joinModal')).hide();
                e.target.reset();
            } catch (error) {
                showAlert('error', 'Sorry, there was an error submitting your application. Please try again.');
            } finally {
                submitButton.innerHTML = originalText;
                submitButton.disabled = false;
            }
        }

        async function handleLoginForm(e) {
            e.preventDefault();
            
            // Check if this is the new role-based form
            if (e.target.id === 'roleLoginForm') {
                return handleRoleBasedLogin(e);
            }
            
            // Handle legacy login form
            const submitButton = e.target.querySelector('button[type="submit"]');
            const originalText = submitButton.innerHTML;
            
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Logging in...';
            submitButton.disabled = true;
            
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData);
            
            try {
                // Simulate API delay
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Enhanced authentication with role-specific validation
                if (data.email && data.password) {
                    // Validate credentials based on role
                    const isValidLogin = validateCredentials(data.email, data.password, currentUserRole);
                    
                    if (isValidLogin) {
                        const userData = createUserSession(data.email, currentUserRole);
                        
                        // Store user session
                        localStorage.setItem('rotaractUser', JSON.stringify(userData));
                        
                        showAlert('success', `Welcome ${userData.firstName}! Login successful. Redirecting to your ${currentUserRole} portal...`);
                        bootstrap.Modal.getInstance(document.getElementById('loginModal')).hide();
                        
                        // Clear form
                        e.target.reset();
                        
                        // Redirect to appropriate portal
                        setTimeout(() => {
                            openMemberPortal(currentUserRole, userData);
                        }, 1500);
                    } else {
                        throw new Error('Invalid credentials for the selected role. Please check your email and password.');
                    }
                } else {
                    throw new Error('Please enter both email and password.');
                }
                
            } catch (error) {
                showAlert('error', error.message || 'Login failed. Please check your credentials and try again.');
            } finally {
                submitButton.innerHTML = originalText;
                submitButton.disabled = false;
            }
        }

        // Enhanced credential validation
        function validateCredentials(email, password, role) {
            // Demo credentials for testing (in production, this would be server-side)
            const demoCredentials = {
                member: [
                    { email: 'member@rotaract.org', password: 'member123' },
                    { email: 'john.doe@email.com', password: 'password' },
                    // { email: 'jane.smith@email.com', password: 'password' }
                ],
                bod: [
                    { email: 'president@rotaract.org', password: 'bod123' },
                    { email: 'secretary@rotaract.org', password: 'bod123' },
                    // { email: 'treasurer@rotaract.org', password: 'bod123' }
                ],
                core: [
                    { email: 'core@rotaract.org', password: 'core123' },
                    // { email: 'coordinator@rotaract.org', password: 'core123' },
                    { email: 'manager@rotaract.org', password: 'core123' }
                ]
            };

            // Check if credentials match for the specific role
            const roleCredentials = demoCredentials[role] || [];
            return roleCredentials.some(cred => 
                cred.email.toLowerCase() === email.toLowerCase() && 
                cred.password === password
            );
        }

        // Create user session with role-specific data
        function createUserSession(email, role) {
            const baseUserData = {
                email: email,
                role: role,
                loginTime: new Date().toISOString(),
                sessionId: generateSessionId()
            };

            // Role-specific user data
            const roleSpecificData = {
                member: {
                    firstName: getFirstNameFromEmail(email),
                    lastName: 'Member',
                    membershipId: 'M' + Math.floor(Math.random() * 10000),
                    joinDate: '2023-01-15',
                    status: 'Active',
                    eventsAttended: 12,
                    hoursVolunteered: 48,
                    projectsJoined: 6
                },
                bod: {
                    firstName: getFirstNameFromEmail(email),
                    lastName: getBODTitle(email),
                    position: getBODPosition(email),
                    membershipId: 'BOD' + Math.floor(Math.random() * 1000),
                    joinDate: '2022-07-01',
                    status: 'Board Member',
                    totalMembers: 156,
                    activeProjects: 8,
                    pendingApprovals: 3
                },
                core: {
                    firstName: getFirstNameFromEmail(email),
                    lastName: 'Team Lead',
                    department: getCoreTeamDepartment(email),
                    membershipId: 'CT' + Math.floor(Math.random() * 1000),
                    joinDate: '2022-09-01',
                    status: 'Core Team',
                    teamMembers: 24,
                    ongoingEvents: 5,
                    tasksAssigned: 12
                }
            };

            return { ...baseUserData, ...roleSpecificData[role] };
        }

        // Helper functions for user data
        function getFirstNameFromEmail(email) {
            const name = email.split('@')[0];
            return name.charAt(0).toUpperCase() + name.slice(1).replace(/[._]/g, ' ');
        }

        function getBODTitle(email) {
            if (email.includes('president')) return 'President';
            if (email.includes('secretary')) return 'Secretary';
            if (email.includes('treasurer')) return 'Treasurer';
            return 'Board Member';
        }

        function getBODPosition(email) {
            if (email.includes('president')) return 'Club President';
            if (email.includes('secretary')) return 'Club Secretary';
            if (email.includes('treasurer')) return 'Club Treasurer';
            return 'Board of Directors';
        }

        function getCoreTeamDepartment(email) {
            if (email.includes('coordinator')) return 'Event Coordination';
            if (email.includes('manager')) return 'Project Management';
            return 'Community Outreach';
        }

        function generateSessionId() {
            return 'sess_' + Math.random().toString(36).substr(2, 9) + Date.now().toString(36);
        }

        // Member Portal System - Enhanced
        function openMemberPortal(role, userData) {
            // Use enhanced portal if available, fallback to basic portal
            if (typeof createEnhancedPortalModal === 'function') {
                return openRoleSpecificPortal(role, userData);
            }
            
            // Fallback to basic portal
            const portalModal = createPortalModal(role, userData);
            document.body.appendChild(portalModal);
            
            const modal = new bootstrap.Modal(portalModal);
            modal.show();
            
            portalModal.addEventListener('hidden.bs.modal', function() {
                document.body.removeChild(portalModal);
            });
        }

        function createPortalModal(role, userData) {
            const modalDiv = document.createElement('div');
            modalDiv.className = 'modal fade';
            modalDiv.id = `${role}Portal`;
            modalDiv.setAttribute('tabindex', '-1');
            modalDiv.setAttribute('aria-hidden', 'true');
            
            const portalData = getPortalData(role);
            
            modalDiv.innerHTML = `
                <div class="modal-dialog modal-xl modal-dialog-scrollable">
                    <div class="modal-content">
                        <div class="modal-header" style="background: var(--rotaract-blue); color: white;">
                            <h5 class="modal-title">
                                <i class="${portalData.icon} me-2"></i>${portalData.title}
                            </h5>
                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body p-0">
                            ${createPortalContent(role, userData, portalData)}
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close Portal</button>
                            <button type="button" class="btn btn-danger" onclick="logoutUser()">
                                <i class="fas fa-sign-out-alt me-2"></i>Logout
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            return modalDiv;
        }

        function getPortalData(role) {
            const portals = {
                member: {
                    title: 'Member Portal',
                    icon: 'fas fa-user',
                    color: 'primary',
                    features: [
                        { name: 'My Profile', icon: 'fas fa-user-circle', action: 'viewProfile', desc: 'View and update your personal information' },
                        { name: 'Event Registration', icon: 'fas fa-calendar-plus', action: 'viewEvents', desc: 'Browse and register for upcoming events' },
                        { name: 'My Registrations', icon: 'fas fa-list-check', action: 'viewRegistrations', desc: 'Track your event registrations and attendance' },
                        { name: 'Community Projects', icon: 'fas fa-hands-helping', action: 'viewProjects', desc: 'Explore community service opportunities' },
                        { name: 'Announcements', icon: 'fas fa-bullhorn', action: 'viewAnnouncements', desc: 'Stay updated with club announcements' },
                        { name: 'Resources', icon: 'fas fa-book', action: 'viewResources', desc: 'Access club resources and documents' }
                    ]
                },
                bod: {
                    title: 'Board of Directors Portal',
                    icon: 'fas fa-user-tie',
                    color: 'success',
                    features: [
                        { name: 'Dashboard Overview', icon: 'fas fa-chart-dashboard', action: 'viewDashboard', desc: 'Overview of club statistics and metrics' },
                        { name: 'Member Management', icon: 'fas fa-users-cog', action: 'manageMember', desc: 'Manage member applications and profiles' },
                        { name: 'Event Approval', icon: 'fas fa-calendar-check', action: 'approveEvents', desc: 'Review and approve event proposals' },
                        { name: 'Financial Reports', icon: 'fas fa-chart-line', action: 'viewFinancials', desc: 'Access financial reports and budgets' },
                        { name: 'Project Oversight', icon: 'fas fa-project-diagram', action: 'overseeProjects', desc: 'Monitor project progress and outcomes' },
                        { name: 'Strategic Planning', icon: 'fas fa-chess', action: 'strategicPlanning', desc: 'Plan club strategies and initiatives' }
                    ]
                },
                core: {
                    title: 'Core Team Portal',
                    icon: 'fas fa-users-cog',
                    color: 'warning',
                    features: [
                        { name: 'Team Dashboard', icon: 'fas fa-tachometer-alt', action: 'viewTeamDashboard', desc: 'Team performance and coordination' },
                        { name: 'Event Management', icon: 'fas fa-calendar-alt', action: 'manageEvents', desc: 'Create and manage club events' },
                        { name: 'Member Coordination', icon: 'fas fa-users', action: 'coordinateMembers', desc: 'Coordinate team member activities' },
                        { name: 'Project Planning', icon: 'fas fa-tasks', action: 'planProjects', desc: 'Plan and organize service projects' },
                        { name: 'Communication Hub', icon: 'fas fa-comments', action: 'communicationHub', desc: 'Team communication and messaging' },
                        { name: 'Resource Management', icon: 'fas fa-box', action: 'manageResources', desc: 'Manage club resources and inventory' }
                    ]
                }
            };
            return portals[role] || portals.member;
        }

        function createPortalContent(role, userData, portalData) {
            return `
                <div class="container-fluid p-4">
                    <!-- Welcome Section -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="alert border-0" style="background: linear-gradient(135deg, var(--rotaract-blue) 0%, var(--rotaract-gold) 100%); color: white;">
                                <div class="d-flex align-items-center">
                                    <i class="${portalData.icon} fa-3x me-4"></i>
                                    <div>
                                        <h4 class="mb-1">Welcome, ${userData.firstName} ${userData.lastName}!</h4>
                                        <p class="mb-1">Access your ${portalData.title.toLowerCase()} features and stay connected with the Rotaract community.</p>
                                        <small class="opacity-75">
                                            <i class="fas fa-clock me-1"></i>Last login: ${new Date(userData.loginTime).toLocaleString()} | 
                                            <i class="fas fa-id-badge me-1"></i>ID: ${userData.membershipId} | 
                                            <i class="fas fa-calendar me-1"></i>Member since: ${new Date(userData.joinDate).toLocaleDateString()}
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Stats -->
                    <div class="row mb-4">
                        ${createQuickStats(role, userData)}
                    </div>

                    <!-- Feature Grid -->
                    <div class="row">
                        <div class="col-12">
                            <h5 class="mb-3">
                                <i class="fas fa-th-large me-2 text-primary"></i>Portal Features
                            </h5>
                        </div>
                        ${portalData.features.map((feature, index) => `
                            <div class="col-lg-4 col-md-6 mb-3">
                                <div class="card h-100 portal-feature-card" onclick="handlePortalAction('${feature.action}', '${role}', '${feature.name}')" style="cursor: pointer; transition: all 0.3s ease;">
                                    <div class="card-body text-center p-4">
                                        <i class="${feature.icon} fa-2x text-${portalData.color} mb-3"></i>
                                        <h6 class="card-title">${feature.name}</h6>
                                        <p class="card-text text-muted small">
                                            ${feature.desc}
                                        </p>
                                        <button class="btn btn-outline-${portalData.color} btn-sm">
                                            <i class="fas fa-arrow-right me-1"></i>Access
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>

                    <!-- Recent Activity -->
                    <div class="row mt-4">
                        <div class="col-12">
                            <h5 class="mb-3">
                                <i class="fas fa-clock me-2 text-primary"></i>Recent Activity
                            </h5>
                            <div class="card">
                                <div class="card-body">
                                    ${createRecentActivity(role, userData)}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function createQuickStats(role, userData) {
            const stats = {
                member: [
                    { label: 'Events Attended', value: userData.eventsAttended || '12', icon: 'fas fa-calendar-check', color: 'primary' },
                    { label: 'Hours Volunteered', value: userData.hoursVolunteered || '48', icon: 'fas fa-clock', color: 'success' },
                    { label: 'Projects Joined', value: userData.projectsJoined || '6', icon: 'fas fa-hands-helping', color: 'warning' }
                ],
                bod: [
                    { label: 'Total Members', value: userData.totalMembers || '156', icon: 'fas fa-users', color: 'primary' },
                    { label: 'Active Projects', value: userData.activeProjects || '8', icon: 'fas fa-project-diagram', color: 'success' },
                    { label: 'Pending Approvals', value: userData.pendingApprovals || '3', icon: 'fas fa-exclamation-circle', color: 'warning' }
                ],
                core: [
                    { label: 'Team Members', value: userData.teamMembers || '24', icon: 'fas fa-user-friends', color: 'primary' },
                    { label: 'Ongoing Events', value: userData.ongoingEvents || '5', icon: 'fas fa-calendar-alt', color: 'success' },
                    { label: 'Tasks Assigned', value: userData.tasksAssigned || '12', icon: 'fas fa-tasks', color: 'warning' }
                ]
            };

            return (stats[role] || stats.member).map(stat => `
                <div class="col-md-4 mb-3">
                    <div class="card border-0 shadow-sm portal-stats-card">
                        <div class="card-body text-center">
                            <i class="${stat.icon} fa-2x text-${stat.color} mb-2"></i>
                            <h3 class="mb-1 text-${stat.color}">${stat.value}</h3>
                            <p class="mb-0 text-muted small">${stat.label}</p>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function createRecentActivity(role, userData) {
            const activities = {
                member: [
                    { action: 'Registered for Blood Donation Camp', time: '2 hours ago', icon: 'fas fa-calendar-plus' },
                    { action: 'Completed Community Cleanup Project', time: '1 day ago', icon: 'fas fa-check-circle' },
                    { action: 'Updated profile information', time: '3 days ago', icon: 'fas fa-user-edit' },
                    { action: 'Attended Leadership Workshop', time: '1 week ago', icon: 'fas fa-graduation-cap' }
                ],
                bod: [
                    { action: 'Approved 3 new member applications', time: '1 hour ago', icon: 'fas fa-user-check' },
                    { action: 'Reviewed monthly financial report', time: '4 hours ago', icon: 'fas fa-chart-line' },
                    { action: 'Scheduled board meeting for next week', time: '1 day ago', icon: 'fas fa-calendar' },
                    { action: 'Approved community service project', time: '2 days ago', icon: 'fas fa-thumbs-up' }
                ],
                core: [
                    { action: 'Assigned tasks for upcoming event', time: '30 minutes ago', icon: 'fas fa-tasks' },
                    { action: 'Coordinated with 5 team members', time: '2 hours ago', icon: 'fas fa-users' },
                    { action: 'Updated project timeline', time: '5 hours ago', icon: 'fas fa-clock' },
                    { action: 'Created event planning checklist', time: '1 day ago', icon: 'fas fa-list-check' }
                ]
            };

            return (activities[role] || activities.member).map(activity => `
                <div class="d-flex align-items-center mb-3 pb-3 border-bottom">
                    <i class="${activity.icon} text-primary me-3"></i>
                    <div class="flex-grow-1">
                        <p class="mb-0">${activity.action}</p>
                        <small class="text-muted">${activity.time}</small>
                    </div>
                </div>
            `).join('');
        }

        // Enhanced portal action handler
        function handlePortalAction(action, role, featureName) {
            const actionMessages = {
                viewProfile: 'Opening your profile settings...',
                viewEvents: 'Loading available events...',
                viewRegistrations: 'Fetching your event registrations...',
                viewProjects: 'Loading community projects...',
                viewAnnouncements: 'Retrieving latest announcements...',
                viewResources: 'Accessing club resources...',
                viewDashboard: 'Loading dashboard analytics...',
                manageMember: 'Opening member management panel...',
                approveEvents: 'Loading events pending approval...',
                viewFinancials: 'Accessing financial reports...',
                overseeProjects: 'Loading project oversight dashboard...',
                strategicPlanning: 'Opening strategic planning tools...',
                viewTeamDashboard: 'Loading team dashboard...',
                manageEvents: 'Opening event management panel...',
                coordinateMembers: 'Loading member coordination tools...',
                planProjects: 'Opening project planning interface...',
                communicationHub: 'Accessing communication center...',
                manageResources: 'Loading resource management panel...'
            };

            showAlert('info', actionMessages[action] || 'Loading feature...', 3000);
            
            // Simulate loading and then show feature-specific content
            setTimeout(() => {
                showFeatureModal(action, role, featureName);
            }, 1500);
        }

        // Enhanced feature modal
        function showFeatureModal(action, role, featureName) {
            const featureModal = document.createElement('div');
            featureModal.className = 'modal fade';
            featureModal.innerHTML = `
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header" style="background: var(--rotaract-blue); color: white;">
                            <h5 class="modal-title">
                                <i class="fas fa-cog me-2"></i>${featureName}
                            </h5>
                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <div class="text-center py-5">
                                <i class="fas fa-tools fa-3x text-muted mb-3"></i>
                                <h5>Feature Under Development</h5>
                                <p class="text-muted">
                                    The ${featureName.toLowerCase()} feature is currently being developed with advanced functionality. 
                                    It will be available in the next update with full integration.
                                </p>
                                <div class="alert alert-info">
                                    <strong>Coming Soon:</strong> Full ${role} portal functionality including:
                                    <ul class="mt-2 mb-0 text-start">
                                        <li>Real-time data synchronization</li>
                                        <li>Advanced reporting and analytics</li>
                                        <li>Mobile app integration</li>
                                        <li>Automated notifications</li>
                                    </ul>
                                </div>
                                <div class="mt-4">
                                    <button class="btn btn-primary me-2" onclick="showAlert('info', 'You will be notified when this feature is available!')">
                                        <i class="fas fa-bell me-2"></i>Notify Me When Ready
                                    </button>
                                    <button class="btn btn-outline-secondary" onclick="showAlert('success', 'Thank you for your feedback!')">
                                        <i class="fas fa-comment me-2"></i>Send Feedback
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(featureModal);
            const modal = new bootstrap.Modal(featureModal);
            modal.show();
            
            featureModal.addEventListener('hidden.bs.modal', function() {
                document.body.removeChild(featureModal);
            });
        }

        // Utility Functions
        function registerForEvent(eventId) {
            const token = localStorage.getItem('rotaractUser');
            if (!token) {
                showAlert('error', 'Please login to register for events.');
                return;
            }
            
            showAlert('success', 'Registration successful! You will receive a confirmation email shortly.');
            bootstrap.Modal.getInstance(document.getElementById('eventModal')).hide();
        }

        function shareEvent(eventId) {
            if (navigator.share) {
                navigator.share({
                    title: 'Rotaract Club Event',
                    text: 'Check out this amazing event from Rotaract Club!',
                    url: window.location.href + '#event-' + eventId
                });
            } else {
                const url = window.location.href + '#event-' + eventId;
                navigator.clipboard.writeText(url).then(() => {
                    showAlert('success', 'Event link copied to clipboard!');
                });
            }
        }

        function logoutUser() {
            // Get current user data before logout
            const userData = JSON.parse(localStorage.getItem('rotaractUser') || '{}');
            
            // Clear user session
            localStorage.removeItem('rotaractUser');
            
            // Close all modals
            document.querySelectorAll('.modal.show').forEach(modal => {
                bootstrap.Modal.getInstance(modal)?.hide();
            });
            
            // Show logout confirmation
            showAlert('success', `Goodbye ${userData.firstName || 'User'}! You have been logged out successfully.`);
            
            // Reset current user role
            currentUserRole = null;
            
            // Optional: Redirect to home section
            setTimeout(() => {
                scrollToSection('home');
            }, 1000);
        }

        // Session management functions
        function checkUserSession() {
            const userData = localStorage.getItem('rotaractUser');
            if (userData) {
                try {
                    const user = JSON.parse(userData);
                    const loginTime = new Date(user.loginTime);
                    const currentTime = new Date();
                    const sessionDuration = (currentTime - loginTime) / (1000 * 60 * 60); // hours
                    
                    // Session expires after 24 hours
                    if (sessionDuration > 24) {
                        localStorage.removeItem('rotaractUser');
                        showAlert('warning', 'Your session has expired. Please login again.');
                        return null;
                    }
                    
                    return user;
                } catch (error) {
                    localStorage.removeItem('rotaractUser');
                    return null;
                }
            }
            return null;
        }

        // Auto-login if session exists
        function checkAutoLogin() {
            const user = checkUserSession();
            if (user) {
                // Update navbar to show logged in state
                updateNavbarForLoggedInUser(user);
            }
        }

        // Update navbar for logged in user
        function updateNavbarForLoggedInUser(user) {
            const loginDropdown = document.getElementById('loginDropdown');
            if (loginDropdown) {
                // Update the dropdown toggle text to show user name
                loginDropdown.innerHTML = `
                    <i class="fas fa-user-circle me-1"></i>${user.firstName} ${user.lastName}
                `;
                
                // The dropdown menu will be populated when clicked
                // No need to populate it here since it's done dynamically
            }
        }

        // Add event listeners for logged-in user dropdown
        function addLoggedInDropdownListeners() {
            // My Portal handler
            const portalLinks = document.querySelectorAll('a[onclick="openUserPortal()"]');
            portalLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('My Portal clicked');
                    openUserPortal();
                });
            });

            // My Profile handler
            const profileLinks = document.querySelectorAll('a[onclick="showUserProfile()"]');
            profileLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('My Profile clicked');
                    showUserProfile();
                });
            });

            // Logout handler
            const logoutLinks = document.querySelectorAll('a[onclick="logoutUser()"]');
            logoutLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('Logout clicked');
                    logoutUser();
                });
            });
        }

        // Ensure all global functions are properly defined and accessible
        
        // Global function to open user portal
        window.openUserPortal = function() {
            console.log('Opening user portal...');
            const userData = JSON.parse(localStorage.getItem('rotaractUser') || '{}');
            
            if (!userData.email) {
                showAlert('error', 'Please login to access your portal.');
                return;
            }
            
            console.log('User data found:', userData);
            
            // Use the enhanced portal if available
            if (typeof openRoleSpecificPortal === 'function') {
                console.log('Using enhanced portal');
                openRoleSpecificPortal(userData.role, userData);
            } else if (typeof openMemberPortal === 'function') {
                console.log('Using basic portal');
                openMemberPortal(userData.role, userData);
            } else {
                console.error('No portal function available');
                showAlert('error', 'Portal system not available. Please refresh the page.');
            }
        };

        // Enhanced show user profile function
        window.showUserProfile = function() {
            console.log('Opening user profile...');
            const userData = JSON.parse(localStorage.getItem('rotaractUser') || '{}');
            
            if (!userData.email) {
                showAlert('error', 'Please login to view your profile.');
                return;
            }

            console.log('Creating profile modal for user:', userData);

            const profileModal = document.createElement('div');
            profileModal.className = 'modal fade';
            profileModal.innerHTML = `
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header" style="background: var(--rotaract-blue); color: white;">
                            <h5 class="modal-title">
                                <i class="fas fa-user-circle me-2"></i>My Profile
                            </h5>
                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body p-4">
                            <div class="row">
                                <div class="col-md-4 text-center mb-4">
                                    <div class="profile-avatar mb-3">
                                        <i class="fas fa-user-circle fa-5x text-primary"></i>
                                    </div>
                                    <h5>${userData.firstName} ${userData.lastName}</h5>
                                    <span class="badge bg-${getRoleBadgeColor(userData.role)} mb-2">
                                        ${userData.role.toUpperCase()}
                                    </span>
                                    <p class="text-muted small">${userData.position || userData.department || 'Club Member'}</p>
                                    <div class="mt-3">
                                        <button class="btn btn-outline-primary btn-sm" onclick="editProfile()">
                                            <i class="fas fa-edit me-1"></i>Edit Profile
                                        </button>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <h6 class="fw-bold mb-3">
                                        <i class="fas fa-info-circle me-2 text-primary"></i>Profile Information
                                    </h6>
                                    <div class="row g-3">
                                        <div class="col-sm-6">
                                            <label class="form-label small text-muted fw-bold">Email Address</label>
                                            <p class="mb-2">${userData.email}</p>
                                        </div>
                                        <div class="col-sm-6">
                                            <label class="form-label small text-muted fw-bold">Membership ID</label>
                                            <p class="mb-2">
                                                <span class="badge bg-light text-dark">${userData.membershipId}</span>
                                            </p>
                                        </div>
                                        <div class="col-sm-6">
                                            <label class="form-label small text-muted fw-bold">Join Date</label>
                                            <p class="mb-2">${new Date(userData.joinDate).toLocaleDateString()}</p>
                                        </div>
                                        <div class="col-sm-6">
                                            <label class="form-label small text-muted fw-bold">Status</label>
                                            <p class="mb-2">
                                                <span class="badge bg-success">${userData.status}</span>
                                            </p>
                                        </div>
                                        <div class="col-sm-6">
                                            <label class="form-label small text-muted fw-bold">Role</label>
                                            <p class="mb-2">${userData.position || userData.department || userData.role}</p>
                                        </div>
                                        <div class="col-sm-6">
                                            <label class="form-label small text-muted fw-bold">Last Login</label>
                                            <p class="mb-2">${new Date(userData.loginTime).toLocaleString()}</p>
                                        </div>
                                    </div>
                                    
                                    ${createProfileStats(userData)}
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                <i class="fas fa-times me-1"></i>Close
                            </button>
                            <button type="button" class="btn btn-primary" onclick="window.editProfile()">
                                <i class="fas fa-edit me-1"></i>Edit Profile
                            </button>
                            // <button type="button" class="btn btn-success" onclick="window.openUserPortal(); bootstrap.Modal.getInstance(this.closest('.modal')).hide();">
                            //     <i class="fas fa-tachometer-alt me-1"></i>Go to Portal
                            // </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(profileModal);
            const modal = new bootstrap.Modal(profileModal);
            modal.show();
            
            profileModal.addEventListener('hidden.bs.modal', function() {
                document.body.removeChild(profileModal);
            });
        };

        // Enhanced logout function
        window.logoutUser = function() {
            console.log('Logging out user...');
            
            // Get current user data before logout
            const userData = JSON.parse(localStorage.getItem('rotaractUser') || '{}');
            
            // Clear user session
            localStorage.removeItem('rotaractUser');
            
            // Close all modals
            document.querySelectorAll('.modal.show').forEach(modal => {
                const modalInstance = bootstrap.Modal.getInstance(modal);
                if (modalInstance) {
                    modalInstance.hide();
                }
            });
            
            // Reset navbar to original state
            resetNavbarToOriginal();
            
            // Show logout confirmation
            showAlert('success', `Goodbye ${userData.firstName || 'User'}! You have been logged out successfully.`);
            
            // Reset current user role
            currentUserRole = null;
            
            // Optional: Redirect to home section
            setTimeout(() => {
                if (typeof scrollToSection === 'function') {
                    scrollToSection('home');
                }
            }, 1000);
        };

        // Edit profile function
        window.editProfile = function() {
            showAlert('info', 'Profile editing will be available in the full portal system. For now, you can update basic information through your portal dashboard.');
        };

        // Helper functions
        function getRoleBadgeColor(role) {
            const colors = {
                member: 'primary',
                bod: 'success', 
                core: 'warning'
            };
            return colors[role] || 'primary';
        }

        function createProfileStats(userData) {
            const stats = {
                member: [
                    { label: 'Events Attended', value: userData.eventsAttended || '0', icon: 'fas fa-calendar-check' },
                    { label: 'Volunteer Hours', value: userData.hoursVolunteered || '0', icon: 'fas fa-clock' },
                    { label: 'Projects Joined', value: userData.projectsJoined || '0', icon: 'fas fa-hands-helping' }
                ],
                bod: [
                    { label: 'Members Managed', value: userData.totalMembers || '0', icon: 'fas fa-users' },
                    { label: 'Projects Overseen', value: userData.activeProjects || '0', icon: 'fas fa-project-diagram' },
                    { label: 'Decisions Made', value: userData.pendingApprovals || '0', icon: 'fas fa-gavel' }
                ],
                core: [
                    { label: 'Team Members', value: userData.teamMembers || '0', icon: 'fas fa-user-friends' },
                    { label: 'Events Managed', value: userData.ongoingEvents || '0', icon: 'fas fa-calendar-alt' },
                    { label: 'Tasks Completed', value: userData.tasksAssigned || '0', icon: 'fas fa-tasks' }
                ]
            };

            const userStats = stats[userData.role] || stats.member;
            
            return `
                <div class="mt-4">
                    <h6 class="fw-bold mb-3">
                        <i class="fas fa-chart-bar me-2 text-primary"></i>Activity Statistics
                    </h6>
                    <div class="row g-2">
                        ${userStats.map(stat => `
                            <div class="col-4">
                                <div class="card bg-light border-0 text-center p-2">
                                    <i class="${stat.icon} text-primary mb-1"></i>
                                    <h6 class="mb-0">${stat.value}</h6>
                                    <small class="text-muted">${stat.label}</small>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        // Reset navbar to original login state
        function resetNavbarToOriginal() {
            const loginDropdown = document.getElementById('loginDropdown');
            const dropdownMenu = document.getElementById('loginDropdownMenu');
            
            if (loginDropdown) {
                // Reset the dropdown toggle text
                loginDropdown.innerHTML = `
                    <i class="fas fa-sign-in-alt me-1"></i>Login
                `;
                
                // Clear and hide the dropdown menu
                if (dropdownMenu) {
                    dropdownMenu.innerHTML = '';
                    hideDropdownMenu(dropdownMenu);
                }
            }
        }
            
        

        // Initialize session check on page load
        document.addEventListener('DOMContentLoaded', function() {
            // ... existing initialization code ...
            
            // Check for existing session
            setTimeout(() => {
                checkAutoLogin();
            }, 1500);
        });

        function showAlert(type, message, duration = 5000) {
            const existingAlert = document.querySelector(`.alert-${type}.show`);
            if (existingAlert) {
                existingAlert.remove();
            }
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
            alertDiv.style.cssText = `
                top: 90px; 
                right: 20px; 
                z-index: 9999; 
                min-width: 300px; 
                max-width: 90vw;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                border: none;
                border-radius: 8px;
            `;
            
            const icons = {
                success: 'fas fa-check-circle',
                error: 'fas fa-exclamation-circle',
                warning: 'fas fa-exclamation-triangle',
                info: 'fas fa-info-circle'
            };
            
            alertDiv.innerHTML = `
                <div class="d-flex align-items-center">
                    <i class="${icons[type] || icons.info} me-2"></i>
                    <span class="flex-grow-1">${message}</span>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            `;
            
            document.body.appendChild(alertDiv);
            
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.classList.remove('show');
                    setTimeout(() => {
                        if (alertDiv.parentNode) {
                            alertDiv.parentNode.removeChild(alertDiv);
                        }
                    }, 300);
                }
            }, duration);
            
            return alertDiv;
        }
    </script>
</body>
</html>
